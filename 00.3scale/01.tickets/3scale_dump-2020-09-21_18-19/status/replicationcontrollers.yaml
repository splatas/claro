apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-production-1:ff14cc75-f676-4d52-a73e-b02bba640e1c
    openshift.io/deployer-pod.completed-at: 2020-09-03 18:03:32 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 17:33:26 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-21-deploy
    openshift.io/deployment-config.latest-version: "21"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"244895987","generation":22,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:4d2a4886f4439c59c3ea021d64e6e7fa0e6c28d9b490fd5517313e7e9f23e1e2"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:4d2a4886f4439c59c3ea021d64e6e7fa0e6c28d9b490fd5517313e7e9f23e1e2","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:4d2a4886f4439c59c3ea021d64e6e7fa0e6c28d9b490fd5517313e7e9f23e1e2","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":21,"observedGeneration":21,"replicas":1,"updatedReplicas":0,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:4d2a4886f4439c59c3ea021d64e6e7fa0e6c28d9b490fd5517313e7e9f23e1e2"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"False","lastUpdateTime":"2020-09-02T14:27:14Z","lastTransitionTime":"2020-09-02T14:27:14Z","reason":"ProgressDeadlineExceeded","message":"replication controller \"apicast-production-20\" has failed progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T17:33:25Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-21
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "244921655"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-21
  uid: 20b800c6-23b0-4d7f-9ec7-400ff9057d7a
spec:
  replicas: 0
  selector:
    deployment: apicast-production-21
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "21"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-21
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-21
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:4d2a4886f4439c59c3ea021d64e6e7fa0e6c28d9b490fd5517313e7e9f23e1e2
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:4d2a4886f4439c59c3ea021d64e6e7fa0e6c28d9b490fd5517313e7e9f23e1e2
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-production-1:ff14cc75-f676-4d52-a73e-b02bba640e1c
    openshift.io/deployer-pod.completed-at: 2020-09-03 22:01:12 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 21:31:07 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-23-deploy
    openshift.io/deployment-config.latest-version: "23"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"245097942","generation":24,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":23,"observedGeneration":23,"replicas":1,"updatedReplicas":0,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T21:26:02Z","lastTransitionTime":"2020-09-03T21:26:02Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-production-22\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T21:31:07Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-23
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "245123649"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-23
  uid: f8019f86-7a34-460e-9593-d5fa97ab272c
spec:
  replicas: 0
  selector:
    deployment: apicast-production-23
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "23"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-23
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-23
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-production-1:ff14cc75-f676-4d52-a73e-b02bba640e1c
    openshift.io/deployer-pod.created-at: 2020-09-03 22:07:07 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-24-deploy
    openshift.io/deployment-config.latest-version: "24"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"245128665","generation":25,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":24,"observedGeneration":24,"replicas":1,"updatedReplicas":0,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"False","lastUpdateTime":"2020-09-03T22:01:13Z","lastTransitionTime":"2020-09-03T22:01:13Z","reason":"ProgressDeadlineExceeded","message":"replication controller \"apicast-production-23\" has failed progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T22:07:07Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-24
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "245131704"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-24
  uid: 5c93fbbe-5009-4202-ab2c-b0d95c3c042c
spec:
  replicas: 0
  selector:
    deployment: apicast-production-24
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "24"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-24
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-24
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-production-1:ff14cc75-f676-4d52-a73e-b02bba640e1c
    openshift.io/deployer-pod.completed-at: 2020-09-03 22:11:20 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 22:10:17 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-25-deploy
    openshift.io/deployment-config.latest-version: "25"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"245131395","generation":26,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":25,"observedGeneration":25,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T22:07:10Z","lastTransitionTime":"2020-09-03T22:07:10Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-production-24\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T22:10:17Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-25
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "245132905"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-25
  uid: 86a10067-c18b-46b0-b250-90533cf578ac
spec:
  replicas: 0
  selector:
    deployment: apicast-production-25
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "25"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-25
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-25
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-03 22:11:59 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 22:11:22 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-26-deploy
    openshift.io/deployment-config.latest-version: "26"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"245132776","generation":27,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":26,"observedGeneration":26,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T22:10:22Z","lastTransitionTime":"2020-09-03T22:10:22Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-production-25\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T22:11:22Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-26
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "246018276"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-26
  uid: 8e3c33c0-d2a9-4ba3-8471-bb16d4242ac2
spec:
  replicas: 0
  selector:
    deployment: apicast-production-26
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "26"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-26
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-26
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-04 15:40:00 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-04 15:39:28 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-27-deploy
    openshift.io/deployment-config.latest-version: "27"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"246017743","generation":28,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":27,"observedGeneration":27,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T22:12:00Z","lastTransitionTime":"2020-09-03T22:11:58Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-production-26\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-04T15:39:28Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-27
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "249650323"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-27
  uid: a8fe3d68-fb30-4700-a9d4-f33127fe3d49
spec:
  replicas: 0
  selector:
    deployment: apicast-production-27
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "27"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-27
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-27
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-production-27:a8fe3d68-fb30-4700-a9d4-f33127fe3d49
    openshift.io/deployer-pod.created-at: 2020-09-07 15:22:45 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-28-deploy
    openshift.io/deployment-config.latest-version: "28"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"249642964","generation":29,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":28,"observedGeneration":28,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-04T15:40:00Z","lastTransitionTime":"2020-09-04T15:39:57Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-production-27\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-07T15:22:45Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-28
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "249649681"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-28
  uid: d1cb66e5-0ec2-433f-a580-ada658db5c9a
spec:
  replicas: 0
  selector:
    deployment: apicast-production-28
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "28"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-28
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-28
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-07 15:30:56 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-07 15:30:11 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-29-deploy
    openshift.io/deployment-config.latest-version: "29"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"249649491","generation":30,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":29,"observedGeneration":29,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-07T15:22:49Z","lastTransitionTime":"2020-09-07T15:22:49Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-production-28\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-07T15:30:11Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-29
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "252225033"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-29
  uid: f0969f4f-e24f-4034-bfc5-daadbeb0f4b1
spec:
  replicas: 0
  selector:
    deployment: apicast-production-29
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "29"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-29
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-29
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-production-29:f0969f4f-e24f-4034-bfc5-daadbeb0f4b1
    openshift.io/deployer-pod.completed-at: 2020-09-09 20:38:28 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-09 20:33:59 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-30-deploy
    openshift.io/deployment-config.latest-version: "30"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"252220794","generation":31,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":30,"observedGeneration":30,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-07T15:30:58Z","lastTransitionTime":"2020-09-07T15:30:55Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-production-29\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-09T20:33:59Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-30
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "252224570"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-30
  uid: 359dddbc-8725-45bc-b134-5c6043cc1c30
spec:
  replicas: 0
  selector:
    deployment: apicast-production-30
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "30"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-30
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-30
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "0"
    openshift.io/deployer-pod.completed-at: 2020-09-09 20:39:08 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-09 20:38:29 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-31-deploy
    openshift.io/deployment-config.latest-version: "31"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"252224436","generation":32,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":31,"observedGeneration":31,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:10:48Z","lastTransitionTime":"2020-08-31T15:10:48Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-09T20:34:03Z","lastTransitionTime":"2020-09-09T20:34:03Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-production-30\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-09T20:38:28Z"
  generation: 7
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-31
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "259737305"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-31
  uid: 2813a6d8-f48c-4238-b978-5a272c0b206b
spec:
  replicas: 0
  selector:
    deployment: apicast-production-31
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "31"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-31
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-31
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 7
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-09-16 19:24:01 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-16 19:23:57 +0000 UTC
    openshift.io/deployer-pod.name: apicast-production-32-deploy
    openshift.io/deployment-config.latest-version: "32"
    openshift.io/deployment-config.name: apicast-production
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: manual change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-production","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-production","uid":"faa93aa1-2f0e-4734-ba36-491ec82052fe","resourceVersion":"259737238","generation":38,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"production"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","apicast-production"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863"}}],"replicas":0,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-production"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-production","threescale_component":"apicast","threescale_component_element":"production"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"initContainers":[{"name":"system-master-svc","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"apicast-production","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"boot"},{"name":"APICAST_CONFIGURATION_CACHE","value":"300"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"production"}],"resources":{"limits":{"cpu":"1","memory":"128Mi"},"requests":{"cpu":"500m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":32,"observedGeneration":37,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"manual change","causes":[{"type":"Manual"}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-09T20:39:08Z","lastTransitionTime":"2020-09-09T20:39:05Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-production-31\" successfully rolled out"},{"type":"Available","status":"False","lastUpdateTime":"2020-09-11T14:51:27Z","lastTransitionTime":"2020-09-11T14:51:27Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-09-16T19:23:57Z"
  generation: 1
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-production
    threescale_component: apicast
    threescale_component_element: production
  name: apicast-production-32
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-production
    uid: faa93aa1-2f0e-4734-ba36-491ec82052fe
  resourceVersion: "259737323"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-production-32
  uid: 89d1945c-c2d9-4ee4-bc4d-525ae69487b7
spec:
  replicas: 0
  selector:
    deployment: apicast-production-32
    deploymentConfig: apicast-production
    deploymentconfig: apicast-production
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "32"
        openshift.io/deployment-config.name: apicast-production
        openshift.io/deployment.name: apicast-production-32
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-production-32
        deploymentConfig: apicast-production
        deploymentconfig: apicast-production
        threescale_component: apicast
        threescale_component_element: production
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: boot
        - name: APICAST_CONFIGURATION_CACHE
          value: "300"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: production
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-production
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 128Mi
          requests:
            cpu: 500m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 1
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-staging-1:08205bac-cc72-446e-a2f3-f869d2aa1ea7
    openshift.io/deployer-pod.completed-at: 2020-09-03 21:31:06 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 21:25:58 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-24-deploy
    openshift.io/deployment-config.latest-version: "24"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"245093336","generation":25,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:9220dd6cbfa14b42794b4995381684fa474999890f4fd4195a75466e03ed30a1"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:9220dd6cbfa14b42794b4995381684fa474999890f4fd4195a75466e03ed30a1","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":24,"observedGeneration":24,"replicas":1,"updatedReplicas":0,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:9220dd6cbfa14b42794b4995381684fa474999890f4fd4195a75466e03ed30a1"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"False","lastUpdateTime":"2020-09-03T19:19:33Z","lastTransitionTime":"2020-09-03T19:19:33Z","reason":"ProgressDeadlineExceeded","message":"replication controller \"apicast-staging-23\" has failed progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T21:25:58Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-24
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "245098074"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-24
  uid: a77095e5-f573-42a6-a1f1-f8d9daae5ccb
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-24
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "24"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-24
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-24
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:9220dd6cbfa14b42794b4995381684fa474999890f4fd4195a75466e03ed30a1
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-staging-1:08205bac-cc72-446e-a2f3-f869d2aa1ea7
    openshift.io/deployer-pod.completed-at: 2020-09-03 22:01:15 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 21:31:08 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-25-deploy
    openshift.io/deployment-config.latest-version: "25"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"245097943","generation":26,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":25,"observedGeneration":25,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T21:26:07Z","lastTransitionTime":"2020-09-03T21:26:07Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-staging-24\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T21:31:07Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-25
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "245123691"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-25
  uid: 5541309a-37e3-4658-9aa7-f37dece37783
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-25
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "25"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-25
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-25
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:553c286893abb8884ffc1d205c176257acb0e3c316f839b216d67563c7c44656
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-staging-1:08205bac-cc72-446e-a2f3-f869d2aa1ea7
    openshift.io/deployer-pod.created-at: 2020-09-03 22:07:07 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-26-deploy
    openshift.io/deployment-config.latest-version: "26"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"245128666","generation":27,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":26,"observedGeneration":26,"replicas":1,"updatedReplicas":0,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"False","lastUpdateTime":"2020-09-03T22:01:15Z","lastTransitionTime":"2020-09-03T22:01:15Z","reason":"ProgressDeadlineExceeded","message":"replication controller \"apicast-staging-25\" has failed progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T22:07:07Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-26
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "245131611"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-26
  uid: 89e28288-ade6-4f96-b389-dc9204774a25
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-26
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "26"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-26
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-26
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:58b63cf41c135e6d17e30a4131acd21bd8679dab4651fb77bd355b6d5e3af1bb
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-staging-1:08205bac-cc72-446e-a2f3-f869d2aa1ea7
    openshift.io/deployer-pod.completed-at: 2020-09-03 22:11:20 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 22:10:13 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-27-deploy
    openshift.io/deployment-config.latest-version: "27"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"245131396","generation":28,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":27,"observedGeneration":27,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T22:07:10Z","lastTransitionTime":"2020-09-03T22:07:10Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-staging-26\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T22:10:13Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-27
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "245132897"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-27
  uid: 8fb0759a-0100-46a1-b3df-259b5c3142b8
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-27
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "27"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-27
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-27
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:08fb7f3526df1a2f0568ce33f036336a7c7dc939a9347cf6fdf9a2138db23cd0
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-03 22:11:58 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-03 22:11:21 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-28-deploy
    openshift.io/deployment-config.latest-version: "28"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"245132777","generation":29,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":28,"observedGeneration":28,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T22:10:17Z","lastTransitionTime":"2020-09-03T22:10:17Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-staging-27\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-03T22:11:21Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-28
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "246018171"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-28
  uid: 90a19c56-5edb-483f-80a7-8aea27150311
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-28
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "28"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-28
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-28
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:18ab7ef888c47c5ea1010e02834c1d47e1b39502bd29f26973c8d5efbe1d2191
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-04 15:39:54 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-04 15:39:28 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-29-deploy
    openshift.io/deployment-config.latest-version: "29"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"246017744","generation":30,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":29,"observedGeneration":29,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-03T22:11:58Z","lastTransitionTime":"2020-09-03T22:11:56Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-staging-28\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-04T15:39:28Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-29
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "249650447"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-29
  uid: 9db9213a-95d3-4e9a-921d-499f2342f4f2
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-29
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "29"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-29
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-29
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:d6ad0e039275b7bc30fbd80e0eeae412b9cf97cdc1227121b38b97dea3f06c06
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-staging-29:9db9213a-95d3-4e9a-921d-499f2342f4f2
    openshift.io/deployer-pod.created-at: 2020-09-07 15:22:45 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-30-deploy
    openshift.io/deployment-config.latest-version: "30"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"249642954","generation":31,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":30,"observedGeneration":30,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-04T15:39:54Z","lastTransitionTime":"2020-09-04T15:39:52Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-staging-29\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-07T15:22:45Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-30
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "249649665"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-30
  uid: 38c62e99-ad73-40a8-827b-81f260ce5e0c
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-30
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "30"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-30
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-30
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:8a7c73acb0aa750e202e0351555482af32eb47d72f45bd1c364929b1dbf98eea
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-07 15:31:03 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-07 15:30:11 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-31-deploy
    openshift.io/deployment-config.latest-version: "31"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"249649475","generation":32,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":31,"observedGeneration":31,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-07T15:22:49Z","lastTransitionTime":"2020-09-07T15:22:49Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-staging-30\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-07T15:30:11Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-31
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "252225238"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-31
  uid: 3b49df5c-aa3e-483e-8afc-74006a7efc25
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-31
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "31"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-31
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-31
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:309e983df63589f710de738400c2c93abb6bcab17028833a983b2ef5e822cb82
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    kubectl.kubernetes.io/update-source-id: apicast-staging-31:3b49df5c-aa3e-483e-8afc-74006a7efc25
    openshift.io/deployer-pod.completed-at: 2020-09-09 20:38:28 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-09 20:33:59 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-32-deploy
    openshift.io/deployment-config.latest-version: "32"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"252220795","generation":33,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":32,"observedGeneration":32,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-07T15:31:05Z","lastTransitionTime":"2020-09-07T15:31:02Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-staging-31\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-09T20:33:59Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-32
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "252224556"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-32
  uid: f37831af-6fe9-4602-9ac3-0f18c0f16cb0
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-32
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "32"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-32
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-32
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:63ad5389324c01eaefe33a6f9a9a9d11246ba9ea2f1421c6ce0a560c240d420e
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "0"
    openshift.io/deployer-pod.completed-at: 2020-09-09 20:39:23 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-09 20:38:29 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-33-deploy
    openshift.io/deployment-config.latest-version: "33"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"252224434","generation":34,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":33,"observedGeneration":33,"replicas":2,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":1,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-08-31T15:14:36Z","lastTransitionTime":"2020-08-31T15:14:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-09T20:34:04Z","lastTransitionTime":"2020-09-09T20:34:04Z","reason":"ReplicationControllerUpdated","message":"replication controller \"apicast-staging-32\" is progressing"}],"readyReplicas":1}}
  creationTimestamp: "2020-09-09T20:38:28Z"
  generation: 5
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-33
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "259728216"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-33
  uid: 34bba7aa-6099-4574-b0b7-a9e727e0b76c
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-33
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "33"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-33
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-33
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 5
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-09-16 19:12:04 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-16 19:11:59 +0000 UTC
    openshift.io/deployer-pod.name: apicast-staging-34-deploy
    openshift.io/deployment-config.latest-version: "34"
    openshift.io/deployment-config.name: apicast-staging
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: manual change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"apicast-staging","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/apicast-staging","uid":"a22c4ba7-e086-4149-a18f-fd0eafed19d1","resourceVersion":"259728150","generation":38,"creationTimestamp":"2020-08-31T13:39:49Z","labels":{"app":"3scale-api-management","threescale_component":"apicast","threescale_component_element":"staging"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1800,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["apicast-staging"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-apicast:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863"}}],"replicas":0,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"apicast-staging"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"apicast-staging","threescale_component":"apicast","threescale_component_element":"staging"},"annotations":{"prometheus.io/port":"9421","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"apicast-staging","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8090,"protocol":"TCP"},{"name":"metrics","containerPort":9421,"protocol":"TCP"}],"env":[{"name":"THREESCALE_PORTAL_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"PROXY_CONFIGS_ENDPOINT"}}},{"name":"BACKEND_ENDPOINT_OVERRIDE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"service_endpoint"}}},{"name":"APICAST_MANAGEMENT_API","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_MANAGEMENT_API"}}},{"name":"OPENSSL_VERIFY","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"OPENSSL_VERIFY"}}},{"name":"APICAST_RESPONSE_CODES","valueFrom":{"configMapKeyRef":{"name":"apicast-environment","key":"APICAST_RESPONSE_CODES"}}},{"name":"APICAST_CONFIGURATION_LOADER","value":"lazy"},{"name":"APICAST_CONFIGURATION_CACHE","value":"0"},{"name":"THREESCALE_DEPLOYMENT_ENV","value":"staging"}],"resources":{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8090,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8090,"scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":34,"observedGeneration":37,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"manual change","causes":[{"type":"Manual"}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-09T20:39:23Z","lastTransitionTime":"2020-09-09T20:39:20Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"apicast-staging-33\" successfully rolled out"},{"type":"Available","status":"False","lastUpdateTime":"2020-09-11T14:51:27Z","lastTransitionTime":"2020-09-11T14:51:27Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-09-16T19:11:59Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: apicast-staging
    threescale_component: apicast
    threescale_component_element: staging
  name: apicast-staging-34
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: apicast-staging
    uid: a22c4ba7-e086-4149-a18f-fd0eafed19d1
  resourceVersion: "259730026"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/apicast-staging-34
  uid: b4b3014a-4918-475d-9cc2-a0c714f433a2
spec:
  replicas: 0
  selector:
    deployment: apicast-staging-34
    deploymentConfig: apicast-staging
    deploymentconfig: apicast-staging
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "34"
        openshift.io/deployment-config.name: apicast-staging
        openshift.io/deployment.name: apicast-staging-34
        prometheus.io/port: "9421"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: apicast-staging-34
        deploymentConfig: apicast-staging
        deploymentconfig: apicast-staging
        threescale_component: apicast
        threescale_component_element: staging
    spec:
      containers:
      - env:
        - name: THREESCALE_PORTAL_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: PROXY_CONFIGS_ENDPOINT
              name: system-master-apicast
        - name: BACKEND_ENDPOINT_OVERRIDE
          valueFrom:
            secretKeyRef:
              key: service_endpoint
              name: backend-listener
        - name: APICAST_MANAGEMENT_API
          valueFrom:
            configMapKeyRef:
              key: APICAST_MANAGEMENT_API
              name: apicast-environment
        - name: OPENSSL_VERIFY
          valueFrom:
            configMapKeyRef:
              key: OPENSSL_VERIFY
              name: apicast-environment
        - name: APICAST_RESPONSE_CODES
          valueFrom:
            configMapKeyRef:
              key: APICAST_RESPONSE_CODES
              name: apicast-environment
        - name: APICAST_CONFIGURATION_LOADER
          value: lazy
        - name: APICAST_CONFIGURATION_CACHE
          value: "0"
        - name: THREESCALE_DEPLOYMENT_ENV
          value: staging
        image: image-registry.openshift-image-registry.svc:5000/3scale-project/amp-apicast@sha256:7e5d6f382e7e834e11609e5e43cdfeeb4a2e0923e8cf4b9d866e9833e0bb8863
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/live
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        name: apicast-staging
        ports:
        - containerPort: 8080
          protocol: TCP
        - containerPort: 8090
          protocol: TCP
        - containerPort: 9421
          name: metrics
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 128Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:06:00 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:05:52 +0000 UTC
    openshift.io/deployer-pod.name: backend-cron-1-deploy
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: backend-cron
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-cron","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-cron","uid":"f335d24f-a280-4f84-8db6-26ccf6375a61","resourceVersion":"198378517","generation":2,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"cron"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-cron"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-cron"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-cron","threescale_component":"backend","threescale_component_element":"cron"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-cron","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","args":["backend-cron"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}}],"resources":{"limits":{"cpu":"150m","memory":"80Mi"},"requests":{"cpu":"50m","memory":"40Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:50Z","lastTransitionTime":"2020-07-27T13:05:50Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T13:05:52Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-cron
    threescale_component: backend
    threescale_component_element: cron
  name: backend-cron-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-cron
    uid: f335d24f-a280-4f84-8db6-26ccf6375a61
  resourceVersion: "198488592"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-cron-1
  uid: ec65f92f-8553-4ecc-97b4-692193e8a8ef
spec:
  replicas: 0
  selector:
    deployment: backend-cron-1
    deploymentConfig: backend-cron
    deploymentconfig: backend-cron
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: backend-cron
        openshift.io/deployment.name: backend-cron-1
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-cron-1
        deploymentConfig: backend-cron
        deploymentconfig: backend-cron
        threescale_component: backend
        threescale_component_element: cron
    spec:
      containers:
      - args:
        - backend-cron
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: IfNotPresent
        name: backend-cron
        resources:
          limits:
            cpu: 150m
            memory: 80Mi
          requests:
            cpu: 50m
            memory: 40Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - /opt/app/entrypoint.sh
        - sh
        - -c
        - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
          done
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: Always
        name: backend-redis-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:13:34 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:13:21 +0000 UTC
    openshift.io/deployer-pod.name: backend-cron-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: backend-cron
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-cron","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-cron","uid":"f335d24f-a280-4f84-8db6-26ccf6375a61","resourceVersion":"198488372","generation":3,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"cron"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-cron"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-cron"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-cron","node-role.kubernetes.io/worker":"","threescale_component":"backend","threescale_component_element":"cron"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-cron","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","args":["backend-cron"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}}],"resources":{"limits":{"cpu":"150m","memory":"80Mi"},"requests":{"cpu":"50m","memory":"40Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:00Z","lastTransitionTime":"2020-07-27T13:06:00Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:06:01Z","lastTransitionTime":"2020-07-27T13:06:01Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"backend-cron-1\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:13:21Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-cron
    threescale_component: backend
    threescale_component_element: cron
  name: backend-cron-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-cron
    uid: f335d24f-a280-4f84-8db6-26ccf6375a61
  resourceVersion: "216975077"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-cron-2
  uid: fb0a3ca1-4cd1-4dd6-b2f3-a6d20e9922bf
spec:
  replicas: 0
  selector:
    deployment: backend-cron-2
    deploymentConfig: backend-cron
    deploymentconfig: backend-cron
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: backend-cron
        openshift.io/deployment.name: backend-cron-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-cron-2
        deploymentConfig: backend-cron
        deploymentconfig: backend-cron
        node-role.kubernetes.io/worker: ""
        threescale_component: backend
        threescale_component_element: cron
    spec:
      containers:
      - args:
        - backend-cron
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: IfNotPresent
        name: backend-cron
        resources:
          limits:
            cpu: 150m
            memory: 80Mi
          requests:
            cpu: 50m
            memory: 40Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - /opt/app/entrypoint.sh
        - sh
        - -c
        - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
          done
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: Always
        name: backend-redis-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 18:06:17 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:45 +0000 UTC
    openshift.io/deployer-pod.name: backend-cron-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: backend-cron
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-cron","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-cron","uid":"f335d24f-a280-4f84-8db6-26ccf6375a61","resourceVersion":"216974403","generation":4,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"cron"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-cron"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-cron"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-cron","node-role.kubernetes.io/worker":"","threescale_component":"backend","threescale_component_element":"cron"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-cron","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0","args":["backend-cron"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}}],"resources":{"limits":{"cpu":"150m","memory":"80Mi"},"requests":{"cpu":"50m","memory":"40Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:00Z","lastTransitionTime":"2020-07-27T13:06:00Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T15:13:35Z","lastTransitionTime":"2020-07-27T15:13:33Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"backend-cron-2\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:44Z"
  generation: 2
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-cron
    threescale_component: backend
    threescale_component_element: cron
  name: backend-cron-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-cron
    uid: f335d24f-a280-4f84-8db6-26ccf6375a61
  resourceVersion: "216975136"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-cron-3
  uid: 06b3ef9a-5c2d-4a71-8959-a738308b66f2
spec:
  replicas: 1
  selector:
    deployment: backend-cron-3
    deploymentConfig: backend-cron
    deploymentconfig: backend-cron
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: backend-cron
        openshift.io/deployment.name: backend-cron-3
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-cron-3
        deploymentConfig: backend-cron
        deploymentconfig: backend-cron
        node-role.kubernetes.io/worker: ""
        threescale_component: backend
        threescale_component_element: cron
    spec:
      containers:
      - args:
        - backend-cron
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0
        imagePullPolicy: IfNotPresent
        name: backend-cron
        resources:
          limits:
            cpu: 150m
            memory: 80Mi
          requests:
            cpu: 50m
            memory: 40Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - /opt/app/entrypoint.sh
        - sh
        - -c
        - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
          done
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0
        imagePullPolicy: Always
        name: backend-redis-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:06:36 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:05:52 +0000 UTC
    openshift.io/deployer-pod.name: backend-listener-1-deploy
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: backend-listener
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-listener","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-listener","uid":"bd8d873d-6cf2-4d48-954e-b1afb18cca09","resourceVersion":"198378515","generation":2,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"listener"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-listener"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-listener"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-listener","threescale_component":"backend","threescale_component_element":"listener"}},"spec":{"containers":[{"name":"backend-listener","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","args":["bin/3scale_backend","start","-e","production","-p","3000","-x","/dev/stdout"],"ports":[{"containerPort":3000,"protocol":"TCP"}],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"PUMA_WORKERS","value":"16"},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"700Mi"},"requests":{"cpu":"500m","memory":"550Mi"}},"livenessProbe":{"tcpSocket":{"port":3000},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status","port":3000,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:50Z","lastTransitionTime":"2020-07-27T13:05:50Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T13:05:52Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-listener
    threescale_component: backend
    threescale_component_element: listener
  name: backend-listener-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-listener
    uid: bd8d873d-6cf2-4d48-954e-b1afb18cca09
  resourceVersion: "198489489"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-listener-1
  uid: 206d894c-1fb7-4bed-a86e-9868f3866cfa
spec:
  replicas: 0
  selector:
    deployment: backend-listener-1
    deploymentConfig: backend-listener
    deploymentconfig: backend-listener
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: backend-listener
        openshift.io/deployment.name: backend-listener-1
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-listener-1
        deploymentConfig: backend-listener
        deploymentconfig: backend-listener
        threescale_component: backend
        threescale_component_element: listener
    spec:
      containers:
      - args:
        - bin/3scale_backend
        - start
        - -e
        - production
        - -p
        - "3000"
        - -x
        - /dev/stdout
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: PUMA_WORKERS
          value: "16"
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 3000
          timeoutSeconds: 1
        name: backend-listener
        ports:
        - containerPort: 3000
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status
            port: 3000
            scheme: HTTP
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 700Mi
          requests:
            cpu: 500m
            memory: 550Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:14:31 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:13:51 +0000 UTC
    openshift.io/deployer-pod.name: backend-listener-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: backend-listener
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-listener","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-listener","uid":"bd8d873d-6cf2-4d48-954e-b1afb18cca09","resourceVersion":"198488867","generation":3,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"listener"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-listener"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-listener"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-listener","node-role.kubernetes.io/worker":"","threescale_component":"backend","threescale_component_element":"listener"}},"spec":{"containers":[{"name":"backend-listener","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","args":["bin/3scale_backend","start","-e","production","-p","3000","-x","/dev/stdout"],"ports":[{"containerPort":3000,"protocol":"TCP"}],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"PUMA_WORKERS","value":"16"},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"700Mi"},"requests":{"cpu":"500m","memory":"550Mi"}},"livenessProbe":{"tcpSocket":{"port":3000},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status","port":3000,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:36Z","lastTransitionTime":"2020-07-27T13:06:36Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:06:37Z","lastTransitionTime":"2020-07-27T13:05:55Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"backend-listener-1\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:13:51Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-listener
    threescale_component: backend
    threescale_component_element: listener
  name: backend-listener-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-listener
    uid: bd8d873d-6cf2-4d48-954e-b1afb18cca09
  resourceVersion: "216975726"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-listener-2
  uid: cde70593-182f-4fc5-8b09-1a72433e98a1
spec:
  replicas: 0
  selector:
    deployment: backend-listener-2
    deploymentConfig: backend-listener
    deploymentconfig: backend-listener
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: backend-listener
        openshift.io/deployment.name: backend-listener-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-listener-2
        deploymentConfig: backend-listener
        deploymentconfig: backend-listener
        node-role.kubernetes.io/worker: ""
        threescale_component: backend
        threescale_component_element: listener
    spec:
      containers:
      - args:
        - bin/3scale_backend
        - start
        - -e
        - production
        - -p
        - "3000"
        - -x
        - /dev/stdout
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: PUMA_WORKERS
          value: "16"
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 3000
          timeoutSeconds: 1
        name: backend-listener
        ports:
        - containerPort: 3000
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status
            port: 3000
            scheme: HTTP
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 700Mi
          requests:
            cpu: 500m
            memory: 550Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 18:06:55 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:45 +0000 UTC
    openshift.io/deployer-pod.name: backend-listener-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: backend-listener
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-listener","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-listener","uid":"bd8d873d-6cf2-4d48-954e-b1afb18cca09","resourceVersion":"216974406","generation":4,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"listener"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-listener"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-listener"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-listener","node-role.kubernetes.io/worker":"","threescale_component":"backend","threescale_component_element":"listener"}},"spec":{"containers":[{"name":"backend-listener","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0","args":["bin/3scale_backend","start","-e","production","-p","3000","-x","/dev/stdout"],"ports":[{"containerPort":3000,"protocol":"TCP"}],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"PUMA_WORKERS","value":"16"},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"700Mi"},"requests":{"cpu":"500m","memory":"550Mi"}},"livenessProbe":{"tcpSocket":{"port":3000},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"httpGet":{"path":"/status","port":3000,"scheme":"HTTP"},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0"}}}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T15:14:31Z","lastTransitionTime":"2020-07-27T15:14:29Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"backend-listener-2\" successfully rolled out"},{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T15:21:33Z","lastTransitionTime":"2020-07-27T15:21:33Z","message":"Deployment config has minimum availability."}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:45Z"
  generation: 2
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-listener
    threescale_component: backend
    threescale_component_element: listener
  name: backend-listener-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-listener
    uid: bd8d873d-6cf2-4d48-954e-b1afb18cca09
  resourceVersion: "216975771"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-listener-3
  uid: ecc4dbe2-d318-44da-a18d-a4c7d4645262
spec:
  replicas: 1
  selector:
    deployment: backend-listener-3
    deploymentConfig: backend-listener
    deploymentconfig: backend-listener
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: backend-listener
        openshift.io/deployment.name: backend-listener-3
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-listener-3
        deploymentConfig: backend-listener
        deploymentconfig: backend-listener
        node-role.kubernetes.io/worker: ""
        threescale_component: backend
        threescale_component_element: listener
    spec:
      containers:
      - args:
        - bin/3scale_backend
        - start
        - -e
        - production
        - -p
        - "3000"
        - -x
        - /dev/stdout
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: PUMA_WORKERS
          value: "16"
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 3000
          timeoutSeconds: 1
        name: backend-listener
        ports:
        - containerPort: 3000
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status
            port: 3000
            scheme: HTTP
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: "1"
            memory: 700Mi
          requests:
            cpu: 500m
            memory: 550Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:06:02 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:05:52 +0000 UTC
    openshift.io/deployer-pod.name: backend-worker-1-deploy
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: backend-worker
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-worker","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-worker","uid":"02d85144-f363-4545-aafc-2c04c4d74095","resourceVersion":"198378509","generation":2,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"worker"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-worker"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-worker"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-worker","threescale_component":"backend","threescale_component_element":"worker"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-worker","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","args":["bin/3scale_backend_worker","run"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"CONFIG_EVENTS_HOOK","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"URL"}}},{"name":"CONFIG_EVENTS_HOOK_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}}],"resources":{"limits":{"cpu":"1","memory":"300Mi"},"requests":{"cpu":"150m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:50Z","lastTransitionTime":"2020-07-27T13:05:50Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T13:05:52Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-worker
    threescale_component: backend
    threescale_component_element: worker
  name: backend-worker-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-worker
    uid: 02d85144-f363-4545-aafc-2c04c4d74095
  resourceVersion: "198489567"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-worker-1
  uid: 63962665-45bc-4b2f-89a0-a25593be4553
spec:
  replicas: 0
  selector:
    deployment: backend-worker-1
    deploymentConfig: backend-worker
    deploymentconfig: backend-worker
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: backend-worker
        openshift.io/deployment.name: backend-worker-1
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-worker-1
        deploymentConfig: backend-worker
        deploymentconfig: backend-worker
        threescale_component: backend
        threescale_component_element: worker
    spec:
      containers:
      - args:
        - bin/3scale_backend_worker
        - run
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: CONFIG_EVENTS_HOOK
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-events-hook
        - name: CONFIG_EVENTS_HOOK_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: IfNotPresent
        name: backend-worker
        resources:
          limits:
            cpu: "1"
            memory: 300Mi
          requests:
            cpu: 150m
            memory: 50Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - /opt/app/entrypoint.sh
        - sh
        - -c
        - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
          done
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: Always
        name: backend-redis-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:14:35 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:14:22 +0000 UTC
    openshift.io/deployer-pod.name: backend-worker-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: backend-worker
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-worker","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-worker","uid":"02d85144-f363-4545-aafc-2c04c4d74095","resourceVersion":"198489350","generation":3,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"worker"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-worker"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-worker"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-worker","node-role.kubernetes.io/worker":"","threescale_component":"backend","threescale_component_element":"worker"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-worker","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5","args":["bin/3scale_backend_worker","run"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"CONFIG_EVENTS_HOOK","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"URL"}}},{"name":"CONFIG_EVENTS_HOOK_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}}],"resources":{"limits":{"cpu":"1","memory":"300Mi"},"requests":{"cpu":"150m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:01Z","lastTransitionTime":"2020-07-27T13:06:01Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:06:01Z","lastTransitionTime":"2020-07-27T13:06:01Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"backend-worker-1\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:14:22Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-worker
    threescale_component: backend
    threescale_component_element: worker
  name: backend-worker-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-worker
    uid: 02d85144-f363-4545-aafc-2c04c4d74095
  resourceVersion: "216975101"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-worker-2
  uid: ae369959-4676-45a4-bcac-3a5d821fa5ad
spec:
  replicas: 0
  selector:
    deployment: backend-worker-2
    deploymentConfig: backend-worker
    deploymentconfig: backend-worker
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: backend-worker
        openshift.io/deployment.name: backend-worker-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-worker-2
        deploymentConfig: backend-worker
        deploymentconfig: backend-worker
        node-role.kubernetes.io/worker: ""
        threescale_component: backend
        threescale_component_element: worker
    spec:
      containers:
      - args:
        - bin/3scale_backend_worker
        - run
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: CONFIG_EVENTS_HOOK
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-events-hook
        - name: CONFIG_EVENTS_HOOK_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: IfNotPresent
        name: backend-worker
        resources:
          limits:
            cpu: "1"
            memory: 300Mi
          requests:
            cpu: 150m
            memory: 50Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - /opt/app/entrypoint.sh
        - sh
        - -c
        - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
          done
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:d8322db4149afc5672ebc3d0430a077c58a8e3e98d7fce720b6a5a3d2498c9c5
        imagePullPolicy: Always
        name: backend-redis-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 18:06:18 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:45 +0000 UTC
    openshift.io/deployer-pod.name: backend-worker-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: backend-worker
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"backend-worker","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/backend-worker","uid":"02d85144-f363-4545-aafc-2c04c4d74095","resourceVersion":"216974404","generation":4,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"backend","threescale_component_element":"worker"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["backend-redis-svc","backend-worker"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-backend:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"backend-worker"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"backend-worker","node-role.kubernetes.io/worker":"","threescale_component":"backend","threescale_component_element":"worker"}},"spec":{"initContainers":[{"name":"backend-redis-svc","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0","command":["/opt/app/entrypoint.sh","sh","-c","until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS; done"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"backend-worker","image":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0","args":["bin/3scale_backend_worker","run"],"env":[{"name":"CONFIG_REDIS_PROXY","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"CONFIG_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"CONFIG_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"CONFIG_QUEUES_MASTER_NAME","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_URL"}}},{"name":"CONFIG_QUEUES_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_HOSTS"}}},{"name":"CONFIG_QUEUES_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_QUEUES_SENTINEL_ROLE"}}},{"name":"RACK_ENV","valueFrom":{"configMapKeyRef":{"name":"backend-environment","key":"RACK_ENV"}}},{"name":"CONFIG_EVENTS_HOOK","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"URL"}}},{"name":"CONFIG_EVENTS_HOOK_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}}],"resources":{"limits":{"cpu":"1","memory":"300Mi"},"requests":{"cpu":"150m","memory":"50Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:01Z","lastTransitionTime":"2020-07-27T13:06:01Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T15:14:36Z","lastTransitionTime":"2020-07-27T15:14:33Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"backend-worker-2\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:45Z"
  generation: 2
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: backend-worker
    threescale_component: backend
    threescale_component_element: worker
  name: backend-worker-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: backend-worker
    uid: 02d85144-f363-4545-aafc-2c04c4d74095
  resourceVersion: "216975165"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/backend-worker-3
  uid: af56ccb1-f616-41fa-b8a1-869b24671dbc
spec:
  replicas: 1
  selector:
    deployment: backend-worker-3
    deploymentConfig: backend-worker
    deploymentconfig: backend-worker
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: backend-worker
        openshift.io/deployment.name: backend-worker-3
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: backend-worker-3
        deploymentConfig: backend-worker
        deploymentconfig: backend-worker
        node-role.kubernetes.io/worker: ""
        threescale_component: backend
        threescale_component_element: worker
    spec:
      containers:
      - args:
        - bin/3scale_backend_worker
        - run
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: CONFIG_EVENTS_HOOK
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-events-hook
        - name: CONFIG_EVENTS_HOOK_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0
        imagePullPolicy: IfNotPresent
        name: backend-worker
        resources:
          limits:
            cpu: "1"
            memory: 300Mi
          requests:
            cpu: 150m
            memory: 50Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - /opt/app/entrypoint.sh
        - sh
        - -c
        - until rake connectivity:redis_storage_queue_check; do sleep $SLEEP_SECONDS;
          done
        env:
        - name: CONFIG_REDIS_PROXY
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: CONFIG_QUEUES_MASTER_NAME
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_URL
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_HOSTS
              name: backend-redis
        - name: CONFIG_QUEUES_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_QUEUES_SENTINEL_ROLE
              name: backend-redis
        - name: RACK_ENV
          valueFrom:
            configMapKeyRef:
              key: RACK_ENV
              name: backend-environment
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/backend-rhel7@sha256:bd626295c55a7815a816d7049fba1febdec6a3305dee2a3292e92a26d56036b0
        imagePullPolicy: Always
        name: backend-redis-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-09-08 15:41:49 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-08 15:41:31 +0000 UTC
    openshift.io/deployer-pod.name: book-service-1-deploy
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: book-service
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"book-service","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/book-service","uid":"c2ac3835-10b8-447f-9a04-84c18fd8d7f3","resourceVersion":"250880727","generation":2,"creationTimestamp":"2020-09-08T15:07:36Z","labels":{"app":"book-service"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["book-service"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"book-service:latest"},"lastTriggeredImage":"image-registry.openshift-image-registry.svc:5000/3scale-project/book-service@sha256:580fff8b679089ef830b1b128687a02bda68ae0f6f6d1320ee10ca7c937f8191"}},{"type":"ConfigChange"}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"app":"book-service","deploymentconfig":"book-service"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"book-service","deploymentconfig":"book-service"},"annotations":{"openshift.io/generated-by":"OpenShiftNewApp"}},"spec":{"containers":[{"name":"book-service","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/book-service@sha256:580fff8b679089ef830b1b128687a02bda68ae0f6f6d1320ee10ca7c937f8191","ports":[{"containerPort":8181,"protocol":"TCP"}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"50m","memory":"256Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-09-08T15:07:36Z","lastTransitionTime":"2020-09-08T15:07:36Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-09-08T15:41:31Z"
  generation: 2
  labels:
    app: book-service
    openshift.io/deployment-config.name: book-service
  name: book-service-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: book-service
    uid: c2ac3835-10b8-447f-9a04-84c18fd8d7f3
  resourceVersion: "250880983"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/book-service-1
  uid: c43e1655-8091-4046-beeb-8d9a68b52121
spec:
  replicas: 1
  selector:
    app: book-service
    deployment: book-service-1
    deploymentconfig: book-service
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: book-service
        openshift.io/deployment.name: book-service-1
        openshift.io/generated-by: OpenShiftNewApp
      creationTimestamp: null
      labels:
        app: book-service
        deployment: book-service-1
        deploymentconfig: book-service
    spec:
      containers:
      - image: image-registry.openshift-image-registry.svc:5000/3scale-project/book-service@sha256:580fff8b679089ef830b1b128687a02bda68ae0f6f6d1320ee10ca7c937f8191
        imagePullPolicy: Always
        name: book-service
        ports:
        - containerPort: 8181
          protocol: TCP
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 50m
            memory: 256Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-08 13:12:10 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-08 13:07:42 +0000 UTC
    openshift.io/deployer-pod.name: claro-mock-service-dc-1-deploy
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: claro-mock-service-dc
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"claro-mock-service-dc","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/claro-mock-service-dc","uid":"fcbd970d-99c7-4be2-ad4f-afca15a19e04","resourceVersion":"250746722","generation":1,"creationTimestamp":"2020-09-08T13:07:42Z"},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"app":"claro-mock-service"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"claro-mock-service"}},"spec":{"containers":[{"name":"claro-mock-service","image":"3scale-project/claro-mock-service","ports":[{"containerPort":8080,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":0,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]}}}
  creationTimestamp: "2020-09-08T13:07:42Z"
  generation: 3
  labels:
    openshift.io/deployment-config.name: claro-mock-service-dc
  name: claro-mock-service-dc-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: claro-mock-service-dc
    uid: fcbd970d-99c7-4be2-ad4f-afca15a19e04
  resourceVersion: "250750683"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/claro-mock-service-dc-1
  uid: dc75cc6b-1376-41ab-9a8b-6b0768f8200b
spec:
  replicas: 0
  selector:
    app: claro-mock-service
    deployment: claro-mock-service-dc-1
    deploymentconfig: claro-mock-service-dc
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: claro-mock-service-dc
        openshift.io/deployment.name: claro-mock-service-dc-1
      creationTimestamp: null
      labels:
        app: claro-mock-service
        deployment: claro-mock-service-dc-1
        deploymentconfig: claro-mock-service-dc
    spec:
      containers:
      - image: 3scale-project/claro-mock-service
        imagePullPolicy: Always
        name: claro-mock-service
        ports:
        - containerPort: 8080
          protocol: TCP
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-09-08 13:16:47 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-08 13:12:11 +0000 UTC
    openshift.io/deployer-pod.name: claro-mock-service-dc-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: claro-mock-service-dc
    openshift.io/deployment.cancelled: "true"
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: newer deployment was found running
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"claro-mock-service-dc","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/claro-mock-service-dc","uid":"fcbd970d-99c7-4be2-ad4f-afca15a19e04","resourceVersion":"250750582","generation":2,"creationTimestamp":"2020-09-08T13:07:42Z"},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"app":"claro-mock-service"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"claro-mock-service"}},"spec":{"containers":[{"name":"claro-mock-service","image":"3scale-project/claro-mock-service:1.0","ports":[{"containerPort":8080,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":1,"replicas":1,"updatedReplicas":1,"availableReplicas":0,"unavailableReplicas":1,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-09-08T13:07:42Z","lastTransitionTime":"2020-09-08T13:07:42Z","message":"Deployment config does not have minimum availability."},{"type":"Progressing","status":"Unknown","lastUpdateTime":"2020-09-08T13:07:42Z","lastTransitionTime":"2020-09-08T13:07:42Z","message":"replication controller \"claro-mock-service-dc-1\" is waiting for pod \"claro-mock-service-dc-1-deploy\" to run"}]}}
  creationTimestamp: "2020-09-08T13:12:11Z"
  generation: 3
  labels:
    openshift.io/deployment-config.name: claro-mock-service-dc
  name: claro-mock-service-dc-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: claro-mock-service-dc
    uid: fcbd970d-99c7-4be2-ad4f-afca15a19e04
  resourceVersion: "250754651"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/claro-mock-service-dc-2
  uid: 5dc3cce6-cecd-4c8f-886d-9d5da91bd85d
spec:
  replicas: 0
  selector:
    app: claro-mock-service
    deployment: claro-mock-service-dc-2
    deploymentconfig: claro-mock-service-dc
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: claro-mock-service-dc
        openshift.io/deployment.name: claro-mock-service-dc-2
      creationTimestamp: null
      labels:
        app: claro-mock-service
        deployment: claro-mock-service-dc-2
        deploymentconfig: claro-mock-service-dc
    spec:
      containers:
      - image: 3scale-project/claro-mock-service:1.0
        imagePullPolicy: Always
        name: claro-mock-service
        ports:
        - containerPort: 8080
          protocol: TCP
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-09-08 13:17:06 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-09-08 13:16:48 +0000 UTC
    openshift.io/deployer-pod.name: claro-mock-service-dc-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: claro-mock-service-dc
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"claro-mock-service-dc","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/claro-mock-service-dc","uid":"fcbd970d-99c7-4be2-ad4f-afca15a19e04","resourceVersion":"250754568","generation":3,"creationTimestamp":"2020-09-08T13:07:42Z"},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"app":"claro-mock-service"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"claro-mock-service"}},"spec":{"containers":[{"name":"claro-mock-service","image":"image-registry.openshift-image-registry.svc:5000/3scale-project/claro-mock-service:1.0","ports":[{"containerPort":8080,"protocol":"TCP"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":0,"unavailableReplicas":1,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-09-08T13:07:42Z","lastTransitionTime":"2020-09-08T13:07:42Z","message":"Deployment config does not have minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-09-08T13:12:16Z","lastTransitionTime":"2020-09-08T13:12:16Z","reason":"ReplicationControllerUpdated","message":"replication controller \"claro-mock-service-dc-2\" is progressing"}]}}
  creationTimestamp: "2020-09-08T13:16:48Z"
  generation: 2
  labels:
    openshift.io/deployment-config.name: claro-mock-service-dc
  name: claro-mock-service-dc-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: claro-mock-service-dc
    uid: fcbd970d-99c7-4be2-ad4f-afca15a19e04
  resourceVersion: "250754914"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/claro-mock-service-dc-3
  uid: d078b1ce-b490-440f-89a2-f0a470607151
spec:
  replicas: 1
  selector:
    app: claro-mock-service
    deployment: claro-mock-service-dc-3
    deploymentconfig: claro-mock-service-dc
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: claro-mock-service-dc
        openshift.io/deployment.name: claro-mock-service-dc-3
      creationTimestamp: null
      labels:
        app: claro-mock-service
        deployment: claro-mock-service-dc-3
        deploymentconfig: claro-mock-service-dc
    spec:
      containers:
      - image: image-registry.openshift-image-registry.svc:5000/3scale-project/claro-mock-service:1.0
        imagePullPolicy: Always
        name: claro-mock-service
        ports:
        - containerPort: 8080
          protocol: TCP
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 14:02:11 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 14:00:28 +0000 UTC
    openshift.io/deployer-pod.name: system-app-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: system-app
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: manual change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-app","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-app","uid":"1abc9ef3-5a0c-428e-a0df-945acb1f9185","resourceVersion":"198424306","generation":4,"creationTimestamp":"2020-07-27T13:05:52Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"app"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%","pre":{"failurePolicy":"Retry","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:deploy"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}},{"name":"MASTER_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_ACCESS_TOKEN"}}}],"containerName":"system-master","volumes":["system-storage"]}},"post":{"failurePolicy":"Abort","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:post_deploy"],"containerName":"system-master"}}},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-provider","system-developer","system-master"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-app"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-app","threescale_component":"system","threescale_component_element":"app"}},"spec":{"volumes":[{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"containers":[{"name":"system-master","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["env","TENANT_MODE=master","PORT=3002","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"master","containerPort":3002,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"master"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"master","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-provider","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["env","TENANT_MODE=provider","PORT=3000","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"provider","containerPort":3000,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"provider"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"provider","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-developer","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["env","PORT=3001","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"developer","containerPort":3001,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","readOnly":true,"mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"developer"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"developer","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":4,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"manual change","causes":[{"type":"Manual"}]},"conditions":[{"type":"Progressing","status":"False","lastUpdateTime":"2020-07-27T13:58:34Z","lastTransitionTime":"2020-07-27T13:58:34Z","reason":"ProgressDeadlineExceeded","message":"replication controller \"system-app-3\" has failed progressing"},{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:58:34Z","lastTransitionTime":"2020-07-27T13:58:34Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T14:00:28Z"
  generation: 5
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-app
    threescale_component: system
    threescale_component_element: app
  name: system-app-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-app
    uid: 1abc9ef3-5a0c-428e-a0df-945acb1f9185
  resourceVersion: "216760666"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-app-3
  uid: 85f7f166-620a-4c3d-b4cc-21722ebc83fc
spec:
  replicas: 0
  selector:
    deployment: system-app-3
    deploymentConfig: system-app
    deploymentconfig: system-app
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: system-app
        openshift.io/deployment.name: system-app-3
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-app-3
        deploymentConfig: system-app
        deploymentconfig: system-app
        threescale_component: system
        threescale_component_element: app
    spec:
      containers:
      - args:
        - env
        - TENANT_MODE=master
        - PORT=3002
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: master
          timeoutSeconds: 10
        name: system-master
        ports:
        - containerPort: 3002
          name: master
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: master
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /opt/system-extra-configs
          name: system-config
      - args:
        - env
        - TENANT_MODE=provider
        - PORT=3000
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: provider
          timeoutSeconds: 10
        name: system-provider
        ports:
        - containerPort: 3000
          name: provider
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: provider
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /opt/system-extra-configs
          name: system-config
      - args:
        - env
        - PORT=3001
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: developer
          timeoutSeconds: 10
        name: system-developer
        ports:
        - containerPort: 3001
          name: developer
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: developer
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
          readOnly: true
        - mountPath: /opt/system-extra-configs
          name: system-config
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - name: system-storage
        persistentVolumeClaim:
          claimName: system-storage
      - configMap:
          defaultMode: 420
          items:
          - key: zync.yml
            path: zync.yml
          - key: rolling_updates.yml
            path: rolling_updates.yml
          - key: service_discovery.yml
            path: service_discovery.yml
          name: system
        name: system-config
status:
  observedGeneration: 5
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 13:53:05 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 13:50:55 +0000 UTC
    openshift.io/deployer-pod.name: system-app-4-deploy
    openshift.io/deployment-config.latest-version: "4"
    openshift.io/deployment-config.name: system-app
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-app","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-app","uid":"1abc9ef3-5a0c-428e-a0df-945acb1f9185","resourceVersion":"216758432","generation":5,"creationTimestamp":"2020-07-27T13:05:52Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"app"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%","pre":{"failurePolicy":"Retry","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:deploy"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}},{"name":"MASTER_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_ACCESS_TOKEN"}}}],"containerName":"system-master","volumes":["system-storage"]}},"post":{"failurePolicy":"Abort","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:post_deploy"],"containerName":"system-master"}}},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-provider","system-developer","system-master"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-app"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-app","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"app"}},"spec":{"volumes":[{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"containers":[{"name":"system-master","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["env","TENANT_MODE=master","PORT=3002","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"master","containerPort":3002,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"master"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"master","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-provider","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["env","TENANT_MODE=provider","PORT=3000","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"provider","containerPort":3000,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"provider"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"provider","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-developer","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["env","PORT=3001","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"developer","containerPort":3001,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","readOnly":true,"mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"developer"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"developer","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":4,"observedGeneration":5,"replicas":1,"updatedReplicas":0,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T15:18:23Z","lastTransitionTime":"2020-07-27T15:18:23Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"False","lastUpdateTime":"2020-08-11T13:50:15Z","lastTransitionTime":"2020-08-11T13:50:15Z","reason":"RolloutCancelled","message":"rollout of replication controller \"system-app-4\" was cancelled"}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T13:50:55Z"
  generation: 2
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-app
    threescale_component: system
    threescale_component_element: app
  name: system-app-4
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-app
    uid: 1abc9ef3-5a0c-428e-a0df-945acb1f9185
  resourceVersion: "216760917"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-app-4
  uid: 0bcb5c24-be18-4f57-a37f-0ff222e456ba
spec:
  replicas: 1
  selector:
    deployment: system-app-4
    deploymentConfig: system-app
    deploymentconfig: system-app
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "4"
        openshift.io/deployment-config.name: system-app
        openshift.io/deployment.name: system-app-4
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-app-4
        deploymentConfig: system-app
        deploymentconfig: system-app
        node-role.kubernetes.io/worker: ""
        threescale_component: system
        threescale_component_element: app
    spec:
      containers:
      - args:
        - env
        - TENANT_MODE=master
        - PORT=3002
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: master
          timeoutSeconds: 10
        name: system-master
        ports:
        - containerPort: 3002
          name: master
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: master
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /opt/system-extra-configs
          name: system-config
      - args:
        - env
        - TENANT_MODE=provider
        - PORT=3000
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: provider
          timeoutSeconds: 10
        name: system-provider
        ports:
        - containerPort: 3000
          name: provider
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: provider
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /opt/system-extra-configs
          name: system-config
      - args:
        - env
        - PORT=3001
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: developer
          timeoutSeconds: 10
        name: system-developer
        ports:
        - containerPort: 3001
          name: developer
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: developer
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
          readOnly: true
        - mountPath: /opt/system-extra-configs
          name: system-config
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - name: system-storage
        persistentVolumeClaim:
          claimName: system-storage
      - configMap:
          defaultMode: 420
          items:
          - key: zync.yml
            path: zync.yml
          - key: rolling_updates.yml
            path: rolling_updates.yml
          - key: service_discovery.yml
            path: service_discovery.yml
          name: system
        name: system-config
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/desired-replicas: "1"
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:43 +0000 UTC
    openshift.io/deployer-pod.name: system-app-5-deploy
    openshift.io/deployment-config.latest-version: "5"
    openshift.io/deployment-config.name: system-app
    openshift.io/deployment.phase: Failed
    openshift.io/deployment.replicas: "0"
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-app","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-app","uid":"1abc9ef3-5a0c-428e-a0df-945acb1f9185","resourceVersion":"216974302","generation":6,"creationTimestamp":"2020-07-27T13:05:52Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"app"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%","pre":{"failurePolicy":"Retry","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:deploy"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}},{"name":"MASTER_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_ACCESS_TOKEN"}}}],"containerName":"system-master","volumes":["system-storage"]}},"post":{"failurePolicy":"Abort","execNewPod":{"command":["bash","-c","bundle exec rake boot openshift:post_deploy"],"containerName":"system-master"}}},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-provider","system-developer","system-master"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-app"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-app","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"app"}},"spec":{"volumes":[{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"containers":[{"name":"system-master","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f","args":["env","TENANT_MODE=master","PORT=3002","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"master","containerPort":3002,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"master"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"master","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-provider","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f","args":["env","TENANT_MODE=provider","PORT=3000","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"provider","containerPort":3000,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"provider"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"provider","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"system-developer","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f","args":["env","PORT=3001","container-entrypoint","bundle","exec","unicorn","-c","config/unicorn.rb"],"ports":[{"name":"developer","containerPort":3001,"protocol":"TCP"}],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"800Mi"},"requests":{"cpu":"50m","memory":"600Mi"}},"volumeMounts":[{"name":"system-storage","readOnly":true,"mountPath":"/opt/system/public/system"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"livenessProbe":{"tcpSocket":{"port":"developer"},"initialDelaySeconds":40,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":40},"readinessProbe":{"httpGet":{"path":"/check.txt","port":"developer","scheme":"HTTP","httpHeaders":[{"name":"X-Forwarded-Proto","value":"https"}]},"initialDelaySeconds":60,"timeoutSeconds":10,"periodSeconds":30,"successThreshold":1,"failureThreshold":10},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":5,"observedGeneration":5,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}},{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}},{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T15:18:23Z","lastTransitionTime":"2020-07-27T15:18:23Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-08-11T13:53:05Z","lastTransitionTime":"2020-08-11T13:52:51Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"system-app-4\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:42Z"
  generation: 1
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-app
    threescale_component: system
    threescale_component_element: app
  name: system-app-5
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-app
    uid: 1abc9ef3-5a0c-428e-a0df-945acb1f9185
  resourceVersion: "217278817"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-app-5
  uid: a3b62a5f-b663-4dfc-9339-4acc8a4989c3
spec:
  replicas: 0
  selector:
    deployment: system-app-5
    deploymentConfig: system-app
    deploymentconfig: system-app
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "5"
        openshift.io/deployment-config.name: system-app
        openshift.io/deployment.name: system-app-5
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-app-5
        deploymentConfig: system-app
        deploymentconfig: system-app
        node-role.kubernetes.io/worker: ""
        threescale_component: system
        threescale_component_element: app
    spec:
      containers:
      - args:
        - env
        - TENANT_MODE=master
        - PORT=3002
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: master
          timeoutSeconds: 10
        name: system-master
        ports:
        - containerPort: 3002
          name: master
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: master
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /opt/system-extra-configs
          name: system-config
      - args:
        - env
        - TENANT_MODE=provider
        - PORT=3000
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: provider
          timeoutSeconds: 10
        name: system-provider
        ports:
        - containerPort: 3000
          name: provider
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: provider
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /opt/system-extra-configs
          name: system-config
      - args:
        - env
        - PORT=3001
        - container-entrypoint
        - bundle
        - exec
        - unicorn
        - -c
        - config/unicorn.rb
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 40
          initialDelaySeconds: 40
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: developer
          timeoutSeconds: 10
        name: system-developer
        ports:
        - containerPort: 3001
          name: developer
          protocol: TCP
        readinessProbe:
          failureThreshold: 10
          httpGet:
            httpHeaders:
            - name: X-Forwarded-Proto
              value: https
            path: /check.txt
            port: developer
            scheme: HTTP
          initialDelaySeconds: 60
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 800Mi
          requests:
            cpu: 50m
            memory: 600Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
          readOnly: true
        - mountPath: /opt/system-extra-configs
          name: system-config
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - name: system-storage
        persistentVolumeClaim:
          claimName: system-storage
      - configMap:
          defaultMode: 420
          items:
          - key: zync.yml
            path: zync.yml
          - key: rolling_updates.yml
            path: rolling_updates.yml
          - key: service_discovery.yml
            path: service_discovery.yml
          name: system
        name: system-config
status:
  observedGeneration: 1
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:06:38 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:05:53 +0000 UTC
    openshift.io/deployer-pod.name: system-memcache-1-deploy
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: system-memcache
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-memcache","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-memcache","uid":"df1d1c60-d1ae-4f70-8caf-91ba2dd77a4b","resourceVersion":"198378611","generation":2,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"memcache"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["memcache"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"system-memcached:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:2be57d773843135c0677e31d34b0cd24fa9dafc4ef1367521caa2bab7c6122e6"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-memcache"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-memcache","threescale_component":"system","threescale_component_element":"memcache"}},"spec":{"containers":[{"name":"memcache","image":"registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:2be57d773843135c0677e31d34b0cd24fa9dafc4ef1367521caa2bab7c6122e6","command":["memcached","-m","64"],"ports":[{"containerPort":11211,"protocol":"TCP"}],"resources":{"limits":{"cpu":"250m","memory":"96Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"tcpSocket":{"port":11211},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["sh","-c","echo version | nc $HOSTNAME 11211 | grep VERSION"]},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:50Z","lastTransitionTime":"2020-07-27T13:05:50Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T13:05:53Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-memcache
    threescale_component: system
    threescale_component_element: memcache
  name: system-memcache-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-memcache
    uid: df1d1c60-d1ae-4f70-8caf-91ba2dd77a4b
  resourceVersion: "198490935"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-memcache-1
  uid: 90941aa4-ee35-4602-9514-24c95dd230a1
spec:
  replicas: 0
  selector:
    deployment: system-memcache-1
    deploymentConfig: system-memcache
    deploymentconfig: system-memcache
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: system-memcache
        openshift.io/deployment.name: system-memcache-1
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-memcache-1
        deploymentConfig: system-memcache
        deploymentconfig: system-memcache
        threescale_component: system
        threescale_component_element: memcache
    spec:
      containers:
      - command:
        - memcached
        - -m
        - "64"
        image: registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:2be57d773843135c0677e31d34b0cd24fa9dafc4ef1367521caa2bab7c6122e6
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 11211
          timeoutSeconds: 1
        name: memcache
        ports:
        - containerPort: 11211
          protocol: TCP
        readinessProbe:
          exec:
            command:
            - sh
            - -c
            - echo version | nc $HOSTNAME 11211 | grep VERSION
          failureThreshold: 3
          initialDelaySeconds: 10
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 250m
            memory: 96Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:15:52 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:15:04 +0000 UTC
    openshift.io/deployer-pod.name: system-memcache-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: system-memcache
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-memcache","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-memcache","uid":"df1d1c60-d1ae-4f70-8caf-91ba2dd77a4b","resourceVersion":"198490071","generation":3,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"memcache"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["memcache"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"system-memcached:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:2be57d773843135c0677e31d34b0cd24fa9dafc4ef1367521caa2bab7c6122e6"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-memcache"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-memcache","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"memcache"}},"spec":{"containers":[{"name":"memcache","image":"registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:2be57d773843135c0677e31d34b0cd24fa9dafc4ef1367521caa2bab7c6122e6","command":["memcached","-m","64"],"ports":[{"containerPort":11211,"protocol":"TCP"}],"resources":{"limits":{"cpu":"250m","memory":"96Mi"},"requests":{"cpu":"50m","memory":"64Mi"}},"livenessProbe":{"tcpSocket":{"port":11211},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["sh","-c","echo version | nc $HOSTNAME 11211 | grep VERSION"]},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:37Z","lastTransitionTime":"2020-07-27T13:06:37Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:06:37Z","lastTransitionTime":"2020-07-27T13:06:37Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"system-memcache-1\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:15:04Z"
  generation: 2
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-memcache
    threescale_component: system
    threescale_component_element: memcache
  name: system-memcache-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-memcache
    uid: df1d1c60-d1ae-4f70-8caf-91ba2dd77a4b
  resourceVersion: "198490976"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-memcache-2
  uid: 3997452c-9d4b-4cb2-a41d-3cd2445fd2b6
spec:
  replicas: 1
  selector:
    deployment: system-memcache-2
    deploymentConfig: system-memcache
    deploymentconfig: system-memcache
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: system-memcache
        openshift.io/deployment.name: system-memcache-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-memcache-2
        deploymentConfig: system-memcache
        deploymentconfig: system-memcache
        node-role.kubernetes.io/worker: ""
        threescale_component: system
        threescale_component_element: memcache
    spec:
      containers:
      - command:
        - memcached
        - -m
        - "64"
        image: registry.redhat.io/3scale-amp2/memcached-rhel7@sha256:2be57d773843135c0677e31d34b0cd24fa9dafc4ef1367521caa2bab7c6122e6
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 11211
          timeoutSeconds: 1
        name: memcache
        ports:
        - containerPort: 11211
          protocol: TCP
        readinessProbe:
          exec:
            command:
            - sh
            - -c
            - echo version | nc $HOSTNAME 11211 | grep VERSION
          failureThreshold: 3
          initialDelaySeconds: 10
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 250m
            memory: 96Mi
          requests:
            cpu: 50m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 14:02:23 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:52:40 +0000 UTC
    openshift.io/deployer-pod.name: system-sidekiq-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: system-sidekiq
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: manual change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sidekiq","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-sidekiq","uid":"a0e70fb0-b766-4010-a7e5-2ff90c824e4f","resourceVersion":"198418725","generation":3,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"sidekiq"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["check-svc","system-sidekiq"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sidekiq"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sidekiq","threescale_component":"system","threescale_component_element":"sidekiq"}},"spec":{"volumes":[{"name":"system-tmp","emptyDir":{"medium":"Memory"}},{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"initContainers":[{"name":"check-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","command":["bash","-c","bundle exec sh -c \"until rake boot:redis \u0026\u0026 curl --output /dev/null --silent --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sidekiq","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["rake","sidekiq:worker","RAILS_MAX_THREADS=25"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-tmp","mountPath":"/tmp"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":3,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"manual change","causes":[{"type":"Manual"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:50Z","lastTransitionTime":"2020-07-27T13:05:50Z","message":"Deployment config does not have minimum availability."},{"type":"Progressing","status":"False","lastUpdateTime":"2020-07-27T13:52:14Z","lastTransitionTime":"2020-07-27T13:52:14Z","reason":"ProgressDeadlineExceeded","message":"replication controller \"system-sidekiq-2\" has failed progressing"}]}}
  creationTimestamp: "2020-07-27T13:52:40Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-sidekiq
    threescale_component: system
    threescale_component_element: sidekiq
  name: system-sidekiq-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-sidekiq
    uid: a0e70fb0-b766-4010-a7e5-2ff90c824e4f
  resourceVersion: "198490614"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-sidekiq-2
  uid: b033fce0-4c62-428f-a04d-d3f45cba2163
spec:
  replicas: 0
  selector:
    deployment: system-sidekiq-2
    deploymentConfig: system-sidekiq
    deploymentconfig: system-sidekiq
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: system-sidekiq
        openshift.io/deployment.name: system-sidekiq-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-sidekiq-2
        deploymentConfig: system-sidekiq
        deploymentconfig: system-sidekiq
        threescale_component: system
        threescale_component_element: sidekiq
    spec:
      containers:
      - args:
        - rake
        - sidekiq:worker
        - RAILS_MAX_THREADS=25
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        name: system-sidekiq
        resources:
          limits:
            cpu: "1"
            memory: 2Gi
          requests:
            cpu: 100m
            memory: 500Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /tmp
          name: system-tmp
        - mountPath: /opt/system-extra-configs
          name: system-config
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - bash
        - -c
        - bundle exec sh -c "until rake boot:redis && curl --output /dev/null --silent
          --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS;
          done"
        env:
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: Always
        name: check-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir:
          medium: Memory
        name: system-tmp
      - name: system-storage
        persistentVolumeClaim:
          claimName: system-storage
      - configMap:
          defaultMode: 420
          items:
          - key: zync.yml
            path: zync.yml
          - key: rolling_updates.yml
            path: rolling_updates.yml
          - key: service_discovery.yml
            path: service_discovery.yml
          name: system
        name: system-config
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:15:35 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:15:17 +0000 UTC
    openshift.io/deployer-pod.name: system-sidekiq-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: system-sidekiq
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sidekiq","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-sidekiq","uid":"a0e70fb0-b766-4010-a7e5-2ff90c824e4f","resourceVersion":"198490296","generation":4,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"sidekiq"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["check-svc","system-sidekiq"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sidekiq"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sidekiq","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"sidekiq"}},"spec":{"volumes":[{"name":"system-tmp","emptyDir":{"medium":"Memory"}},{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"initContainers":[{"name":"check-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","command":["bash","-c","bundle exec sh -c \"until rake boot:redis \u0026\u0026 curl --output /dev/null --silent --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sidekiq","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["rake","sidekiq:worker","RAILS_MAX_THREADS=25"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-tmp","mountPath":"/tmp"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T14:02:22Z","lastTransitionTime":"2020-07-27T14:02:22Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T14:02:22Z","lastTransitionTime":"2020-07-27T14:02:22Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"system-sidekiq-2\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:15:17Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-sidekiq
    threescale_component: system
    threescale_component_element: sidekiq
  name: system-sidekiq-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-sidekiq
    uid: a0e70fb0-b766-4010-a7e5-2ff90c824e4f
  resourceVersion: "216975921"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-sidekiq-3
  uid: 12d02218-c112-4244-8b98-10f616827908
spec:
  replicas: 0
  selector:
    deployment: system-sidekiq-3
    deploymentConfig: system-sidekiq
    deploymentconfig: system-sidekiq
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: system-sidekiq
        openshift.io/deployment.name: system-sidekiq-3
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-sidekiq-3
        deploymentConfig: system-sidekiq
        deploymentconfig: system-sidekiq
        node-role.kubernetes.io/worker: ""
        threescale_component: system
        threescale_component_element: sidekiq
    spec:
      containers:
      - args:
        - rake
        - sidekiq:worker
        - RAILS_MAX_THREADS=25
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        name: system-sidekiq
        resources:
          limits:
            cpu: "1"
            memory: 2Gi
          requests:
            cpu: 100m
            memory: 500Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /tmp
          name: system-tmp
        - mountPath: /opt/system-extra-configs
          name: system-config
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - bash
        - -c
        - bundle exec sh -c "until rake boot:redis && curl --output /dev/null --silent
          --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS;
          done"
        env:
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: Always
        name: check-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir:
          medium: Memory
        name: system-tmp
      - name: system-storage
        persistentVolumeClaim:
          claimName: system-storage
      - configMap:
          defaultMode: 420
          items:
          - key: zync.yml
            path: zync.yml
          - key: rolling_updates.yml
            path: rolling_updates.yml
          - key: service_discovery.yml
            path: service_discovery.yml
          name: system
        name: system-config
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 18:07:08 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:43 +0000 UTC
    openshift.io/deployer-pod.name: system-sidekiq-4-deploy
    openshift.io/deployment-config.latest-version: "4"
    openshift.io/deployment-config.name: system-sidekiq
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sidekiq","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-sidekiq","uid":"a0e70fb0-b766-4010-a7e5-2ff90c824e4f","resourceVersion":"216974301","generation":5,"creationTimestamp":"2020-07-27T13:05:50Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"sidekiq"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["check-svc","system-sidekiq"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sidekiq"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sidekiq","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"sidekiq"}},"spec":{"volumes":[{"name":"system-tmp","emptyDir":{"medium":"Memory"}},{"name":"system-storage","persistentVolumeClaim":{"claimName":"system-storage"}},{"name":"system-config","configMap":{"name":"system","items":[{"key":"zync.yml","path":"zync.yml"},{"key":"rolling_updates.yml","path":"rolling_updates.yml"},{"key":"service_discovery.yml","path":"service_discovery.yml"}],"defaultMode":420}}],"initContainers":[{"name":"check-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f","command":["bash","-c","bundle exec sh -c \"until rake boot:redis \u0026\u0026 curl --output /dev/null --silent --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sidekiq","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f","args":["rake","sidekiq:worker","RAILS_MAX_THREADS=25"],"env":[{"name":"AMP_RELEASE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"AMP_RELEASE"}}},{"name":"APICAST_REGISTRY_URL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"APICAST_REGISTRY_URL"}}},{"name":"FORCE_SSL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"FORCE_SSL"}}},{"name":"PROVIDER_PLAN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"PROVIDER_PLAN"}}},{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"RAILS_LOG_LEVEL","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_LEVEL"}}},{"name":"RAILS_LOG_TO_STDOUT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_LOG_TO_STDOUT"}}},{"name":"SSL_CERT_DIR","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"SSL_CERT_DIR"}}},{"name":"THINKING_SPHINX_PORT","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THINKING_SPHINX_PORT"}}},{"name":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE"}}},{"name":"THREESCALE_SUPERDOMAIN","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"THREESCALE_SUPERDOMAIN"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"MASTER_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_DOMAIN"}}},{"name":"MASTER_USER","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_USER"}}},{"name":"MASTER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"MASTER_PASSWORD"}}},{"name":"ADMIN_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_ACCESS_TOKEN"}}},{"name":"USER_LOGIN","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_USER"}}},{"name":"USER_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_PASSWORD"}}},{"name":"USER_EMAIL","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"ADMIN_EMAIL"}}},{"name":"TENANT_NAME","valueFrom":{"secretKeyRef":{"name":"system-seed","key":"TENANT_NAME"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"system-sphinx"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"/tmp/sphinx.conf"},{"name":"EVENTS_SHARED_SECRET","valueFrom":{"secretKeyRef":{"name":"system-events-hook","key":"PASSWORD"}}},{"name":"RECAPTCHA_PUBLIC_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PUBLIC_KEY"}}},{"name":"RECAPTCHA_PRIVATE_KEY","valueFrom":{"secretKeyRef":{"name":"system-recaptcha","key":"PRIVATE_KEY"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"system-app","key":"SECRET_KEY_BASE"}}},{"name":"MEMCACHE_SERVERS","valueFrom":{"secretKeyRef":{"name":"system-memcache","key":"SERVERS"}}},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}},{"name":"BACKEND_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_URL"}}},{"name":"BACKEND_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_HOSTS"}}},{"name":"BACKEND_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"backend-redis","key":"REDIS_STORAGE_SENTINEL_ROLE"}}},{"name":"APICAST_BACKEND_ROOT_ENDPOINT","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"BACKEND_ROUTE","valueFrom":{"secretKeyRef":{"name":"backend-listener","key":"route_endpoint"}}},{"name":"SMTP_ADDRESS","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"address"}}},{"name":"SMTP_USER_NAME","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"username"}}},{"name":"SMTP_PASSWORD","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"password"}}},{"name":"SMTP_DOMAIN","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"domain"}}},{"name":"SMTP_PORT","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"port"}}},{"name":"SMTP_AUTHENTICATION","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"authentication"}}},{"name":"SMTP_OPENSSL_VERIFY_MODE","valueFrom":{"secretKeyRef":{"name":"system-smtp","key":"openssl.verify.mode"}}},{"name":"APICAST_ACCESS_TOKEN","valueFrom":{"secretKeyRef":{"name":"system-master-apicast","key":"ACCESS_TOKEN"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"CONFIG_INTERNAL_API_USER","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"username"}}},{"name":"CONFIG_INTERNAL_API_PASSWORD","valueFrom":{"secretKeyRef":{"name":"backend-internal-api","key":"password"}}}],"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"system-storage","mountPath":"/opt/system/public/system"},{"name":"system-tmp","mountPath":"/tmp"},{"name":"system-config","mountPath":"/opt/system-extra-configs"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":4,"observedGeneration":4,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T15:15:35Z","lastTransitionTime":"2020-07-27T15:15:33Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"system-sidekiq-3\" successfully rolled out"},{"type":"Available","status":"True","lastUpdateTime":"2020-08-11T08:03:59Z","lastTransitionTime":"2020-08-11T08:03:59Z","message":"Deployment config has minimum availability."}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:42Z"
  generation: 2
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-sidekiq
    threescale_component: system
    threescale_component_element: sidekiq
  name: system-sidekiq-4
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-sidekiq
    uid: a0e70fb0-b766-4010-a7e5-2ff90c824e4f
  resourceVersion: "264679226"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-sidekiq-4
  uid: ac7320f1-9c6c-452d-a132-1e08b20e8efd
spec:
  replicas: 1
  selector:
    deployment: system-sidekiq-4
    deploymentConfig: system-sidekiq
    deploymentconfig: system-sidekiq
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "4"
        openshift.io/deployment-config.name: system-sidekiq
        openshift.io/deployment.name: system-sidekiq-4
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-sidekiq-4
        deploymentConfig: system-sidekiq
        deploymentconfig: system-sidekiq
        node-role.kubernetes.io/worker: ""
        threescale_component: system
        threescale_component_element: sidekiq
    spec:
      containers:
      - args:
        - rake
        - sidekiq:worker
        - RAILS_MAX_THREADS=25
        env:
        - name: AMP_RELEASE
          valueFrom:
            configMapKeyRef:
              key: AMP_RELEASE
              name: system-environment
        - name: APICAST_REGISTRY_URL
          valueFrom:
            configMapKeyRef:
              key: APICAST_REGISTRY_URL
              name: system-environment
        - name: FORCE_SSL
          valueFrom:
            configMapKeyRef:
              key: FORCE_SSL
              name: system-environment
        - name: PROVIDER_PLAN
          valueFrom:
            configMapKeyRef:
              key: PROVIDER_PLAN
              name: system-environment
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: RAILS_LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_LEVEL
              name: system-environment
        - name: RAILS_LOG_TO_STDOUT
          valueFrom:
            configMapKeyRef:
              key: RAILS_LOG_TO_STDOUT
              name: system-environment
        - name: SSL_CERT_DIR
          valueFrom:
            configMapKeyRef:
              key: SSL_CERT_DIR
              name: system-environment
        - name: THINKING_SPHINX_PORT
          valueFrom:
            configMapKeyRef:
              key: THINKING_SPHINX_PORT
              name: system-environment
        - name: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SANDBOX_PROXY_OPENSSL_VERIFY_MODE
              name: system-environment
        - name: THREESCALE_SUPERDOMAIN
          valueFrom:
            configMapKeyRef:
              key: THREESCALE_SUPERDOMAIN
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: MASTER_DOMAIN
          valueFrom:
            secretKeyRef:
              key: MASTER_DOMAIN
              name: system-seed
        - name: MASTER_USER
          valueFrom:
            secretKeyRef:
              key: MASTER_USER
              name: system-seed
        - name: MASTER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: MASTER_PASSWORD
              name: system-seed
        - name: ADMIN_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ADMIN_ACCESS_TOKEN
              name: system-seed
        - name: USER_LOGIN
          valueFrom:
            secretKeyRef:
              key: ADMIN_USER
              name: system-seed
        - name: USER_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ADMIN_PASSWORD
              name: system-seed
        - name: USER_EMAIL
          valueFrom:
            secretKeyRef:
              key: ADMIN_EMAIL
              name: system-seed
        - name: TENANT_NAME
          valueFrom:
            secretKeyRef:
              key: TENANT_NAME
              name: system-seed
        - name: THINKING_SPHINX_ADDRESS
          value: system-sphinx
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: /tmp/sphinx.conf
        - name: EVENTS_SHARED_SECRET
          valueFrom:
            secretKeyRef:
              key: PASSWORD
              name: system-events-hook
        - name: RECAPTCHA_PUBLIC_KEY
          valueFrom:
            secretKeyRef:
              key: PUBLIC_KEY
              name: system-recaptcha
        - name: RECAPTCHA_PRIVATE_KEY
          valueFrom:
            secretKeyRef:
              key: PRIVATE_KEY
              name: system-recaptcha
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: system-app
        - name: MEMCACHE_SERVERS
          valueFrom:
            secretKeyRef:
              key: SERVERS
              name: system-memcache
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: BACKEND_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_URL
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_HOSTS
              name: backend-redis
        - name: BACKEND_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: REDIS_STORAGE_SENTINEL_ROLE
              name: backend-redis
        - name: APICAST_BACKEND_ROOT_ENDPOINT
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: BACKEND_ROUTE
          valueFrom:
            secretKeyRef:
              key: route_endpoint
              name: backend-listener
        - name: SMTP_ADDRESS
          valueFrom:
            secretKeyRef:
              key: address
              name: system-smtp
        - name: SMTP_USER_NAME
          valueFrom:
            secretKeyRef:
              key: username
              name: system-smtp
        - name: SMTP_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: system-smtp
        - name: SMTP_DOMAIN
          valueFrom:
            secretKeyRef:
              key: domain
              name: system-smtp
        - name: SMTP_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: system-smtp
        - name: SMTP_AUTHENTICATION
          valueFrom:
            secretKeyRef:
              key: authentication
              name: system-smtp
        - name: SMTP_OPENSSL_VERIFY_MODE
          valueFrom:
            secretKeyRef:
              key: openssl.verify.mode
              name: system-smtp
        - name: APICAST_ACCESS_TOKEN
          valueFrom:
            secretKeyRef:
              key: ACCESS_TOKEN
              name: system-master-apicast
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: CONFIG_INTERNAL_API_USER
          valueFrom:
            secretKeyRef:
              key: username
              name: backend-internal-api
        - name: CONFIG_INTERNAL_API_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: backend-internal-api
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f
        imagePullPolicy: IfNotPresent
        name: system-sidekiq
        resources:
          limits:
            cpu: "1"
            memory: 2Gi
          requests:
            cpu: 100m
            memory: 500Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/public/system
          name: system-storage
        - mountPath: /tmp
          name: system-tmp
        - mountPath: /opt/system-extra-configs
          name: system-config
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - bash
        - -c
        - bundle exec sh -c "until rake boot:redis && curl --output /dev/null --silent
          --fail --head http://system-master:3000/status; do sleep $SLEEP_SECONDS;
          done"
        env:
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f
        imagePullPolicy: Always
        name: check-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir:
          medium: Memory
        name: system-tmp
      - name: system-storage
        persistentVolumeClaim:
          claimName: system-storage
      - configMap:
          defaultMode: 420
          items:
          - key: zync.yml
            path: zync.yml
          - key: rolling_updates.yml
            path: rolling_updates.yml
          - key: service_discovery.yml
            path: service_discovery.yml
          name: system
        name: system-config
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:58:30 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:52:40 +0000 UTC
    openshift.io/deployer-pod.name: system-sphinx-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: system-sphinx
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: manual change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sphinx","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-sphinx","uid":"8ab59406-9355-4bd3-a676-2bb61ab918f0","resourceVersion":"198418688","generation":3,"creationTimestamp":"2020-07-27T13:05:52Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"sphinx"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","system-sphinx"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sphinx"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sphinx","threescale_component":"system","threescale_component_element":"sphinx"}},"spec":{"volumes":[{"name":"system-sphinx-database","emptyDir":{}}],"initContainers":[{"name":"system-master-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sphinx","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["rake","openshift:thinking_sphinx:start"],"env":[{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"0.0.0.0"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"db/sphinx/production.conf"},{"name":"THINKING_SPHINX_PID_FILE","value":"db/sphinx/searchd.pid"},{"name":"DELTA_INDEX_INTERVAL","value":"5"},{"name":"FULL_REINDEX_INTERVAL","value":"60"},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"80m","memory":"250Mi"}},"volumeMounts":[{"name":"system-sphinx-database","mountPath":"/opt/system/db/sphinx"}],"livenessProbe":{"tcpSocket":{"port":9306},"initialDelaySeconds":60,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":3,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"manual change","causes":[{"type":"Manual"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:50Z","lastTransitionTime":"2020-07-27T13:05:50Z","message":"Deployment config does not have minimum availability."},{"type":"Progressing","status":"False","lastUpdateTime":"2020-07-27T13:52:13Z","lastTransitionTime":"2020-07-27T13:52:13Z","reason":"ProgressDeadlineExceeded","message":"replication controller \"system-sphinx-2\" has failed progressing"}]}}
  creationTimestamp: "2020-07-27T13:52:40Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-sphinx
    threescale_component: system
    threescale_component_element: sphinx
  name: system-sphinx-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-sphinx
    uid: 8ab59406-9355-4bd3-a676-2bb61ab918f0
  resourceVersion: "198490780"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-sphinx-2
  uid: 8f4ee145-e0d6-40ca-8bdc-b34eb19b9926
spec:
  replicas: 0
  selector:
    deployment: system-sphinx-2
    deploymentConfig: system-sphinx
    deploymentconfig: system-sphinx
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: system-sphinx
        openshift.io/deployment.name: system-sphinx-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-sphinx-2
        deploymentConfig: system-sphinx
        deploymentconfig: system-sphinx
        threescale_component: system
        threescale_component_element: sphinx
    spec:
      containers:
      - args:
        - rake
        - openshift:thinking_sphinx:start
        env:
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: THINKING_SPHINX_ADDRESS
          value: 0.0.0.0
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: db/sphinx/production.conf
        - name: THINKING_SPHINX_PID_FILE
          value: db/sphinx/searchd.pid
        - name: DELTA_INDEX_INTERVAL
          value: "5"
        - name: FULL_REINDEX_INTERVAL
          value: "60"
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 9306
          timeoutSeconds: 1
        name: system-sphinx
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 80m
            memory: 250Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/db/sphinx
          name: system-sphinx-database
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir: {}
        name: system-sphinx-database
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:15:42 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:15:31 +0000 UTC
    openshift.io/deployer-pod.name: system-sphinx-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: system-sphinx
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sphinx","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-sphinx","uid":"8ab59406-9355-4bd3-a676-2bb61ab918f0","resourceVersion":"198490562","generation":4,"creationTimestamp":"2020-07-27T13:05:52Z","labels":{"app":"3scale-api-management","threescale_component":"system","threescale_component_element":"sphinx"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","system-sphinx"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sphinx"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sphinx","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"sphinx"}},"spec":{"volumes":[{"name":"system-sphinx-database","emptyDir":{}}],"initContainers":[{"name":"system-master-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sphinx","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a","args":["rake","openshift:thinking_sphinx:start"],"env":[{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"0.0.0.0"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"db/sphinx/production.conf"},{"name":"THINKING_SPHINX_PID_FILE","value":"db/sphinx/searchd.pid"},{"name":"DELTA_INDEX_INTERVAL","value":"5"},{"name":"FULL_REINDEX_INTERVAL","value":"60"},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"80m","memory":"250Mi"}},"volumeMounts":[{"name":"system-sphinx-database","mountPath":"/opt/system/db/sphinx"}],"livenessProbe":{"tcpSocket":{"port":9306},"initialDelaySeconds":60,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:58:30Z","lastTransitionTime":"2020-07-27T13:58:30Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:58:31Z","lastTransitionTime":"2020-07-27T13:58:31Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"system-sphinx-2\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:15:31Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: system-sphinx
    threescale_component: system
    threescale_component_element: sphinx
  name: system-sphinx-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-sphinx
    uid: 8ab59406-9355-4bd3-a676-2bb61ab918f0
  resourceVersion: "216975658"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-sphinx-3
  uid: 499b6683-ef75-4984-92ff-15911e3692c5
spec:
  replicas: 0
  selector:
    deployment: system-sphinx-3
    deploymentConfig: system-sphinx
    deploymentconfig: system-sphinx
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: system-sphinx
        openshift.io/deployment.name: system-sphinx-3
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-sphinx-3
        deploymentConfig: system-sphinx
        deploymentconfig: system-sphinx
        node-role.kubernetes.io/worker: ""
        threescale_component: system
        threescale_component_element: sphinx
    spec:
      containers:
      - args:
        - rake
        - openshift:thinking_sphinx:start
        env:
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: THINKING_SPHINX_ADDRESS
          value: 0.0.0.0
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: db/sphinx/production.conf
        - name: THINKING_SPHINX_PID_FILE
          value: db/sphinx/searchd.pid
        - name: DELTA_INDEX_INTERVAL
          value: "5"
        - name: FULL_REINDEX_INTERVAL
          value: "60"
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 9306
          timeoutSeconds: 1
        name: system-sphinx
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 80m
            memory: 250Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/db/sphinx
          name: system-sphinx-database
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:a934997501b41be2ca2b62e37c35bd334252b5e2ed28652c275bd1de8a9d324a
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir: {}
        name: system-sphinx-database
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 18:06:53 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:43 +0000 UTC
    openshift.io/deployer-pod.name: system-sphinx-4-deploy
    openshift.io/deployment-config.latest-version: "4"
    openshift.io/deployment-config.name: system-sphinx
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"system-sphinx","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/system-sphinx","uid":"8ab59406-9355-4bd3-a676-2bb61ab918f0","resourceVersion":"216974300","generation":5,"creationTimestamp":"2020-07-27T13:05:52Z","labels":{"app":"3scale-api-management","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"sphinx"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":1200,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["system-master-svc","system-sphinx"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-system:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"system-sphinx"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"system-sphinx","node-role.kubernetes.io/worker":"","threescale_component":"system","threescale_component_element":"sphinx"}},"spec":{"volumes":[{"name":"system-sphinx-database","emptyDir":{}}],"initContainers":[{"name":"system-master-svc","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f","command":["sh","-c","until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status); do sleep $SLEEP_SECONDS; done"],"env":[{"name":"SLEEP_SECONDS","value":"1"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"system-sphinx","image":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f","args":["rake","openshift:thinking_sphinx:start"],"env":[{"name":"RAILS_ENV","valueFrom":{"configMapKeyRef":{"name":"system-environment","key":"RAILS_ENV"}}},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"system-database","key":"URL"}}},{"name":"THINKING_SPHINX_ADDRESS","value":"0.0.0.0"},{"name":"THINKING_SPHINX_CONFIGURATION_FILE","value":"db/sphinx/production.conf"},{"name":"THINKING_SPHINX_PID_FILE","value":"db/sphinx/searchd.pid"},{"name":"DELTA_INDEX_INTERVAL","value":"5"},{"name":"FULL_REINDEX_INTERVAL","value":"60"},{"name":"REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"URL"}}},{"name":"MESSAGE_BUS_REDIS_URL","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_URL"}}},{"name":"REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"NAMESPACE"}}},{"name":"MESSAGE_BUS_REDIS_NAMESPACE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_NAMESPACE"}}},{"name":"REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_HOSTS"}}},{"name":"REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"SENTINEL_ROLE"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_HOSTS","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_HOSTS"}}},{"name":"MESSAGE_BUS_REDIS_SENTINEL_ROLE","valueFrom":{"secretKeyRef":{"name":"system-redis","key":"MESSAGE_BUS_SENTINEL_ROLE"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"80m","memory":"250Mi"}},"volumeMounts":[{"name":"system-sphinx-database","mountPath":"/opt/system/db/sphinx"}],"livenessProbe":{"tcpSocket":{"port":9306},"initialDelaySeconds":60,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":4,"observedGeneration":4,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f"}}}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:58:30Z","lastTransitionTime":"2020-07-27T13:58:30Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T15:15:43Z","lastTransitionTime":"2020-07-27T15:15:40Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"system-sphinx-3\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:42Z"
  generation: 2
  labels:
    app: 3scale-api-management
    node-role.kubernetes.io/worker: ""
    openshift.io/deployment-config.name: system-sphinx
    threescale_component: system
    threescale_component_element: sphinx
  name: system-sphinx-4
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: system-sphinx
    uid: 8ab59406-9355-4bd3-a676-2bb61ab918f0
  resourceVersion: "216975715"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/system-sphinx-4
  uid: c8003b61-913a-4c52-84a8-6c7ae4e5d3df
spec:
  replicas: 1
  selector:
    deployment: system-sphinx-4
    deploymentConfig: system-sphinx
    deploymentconfig: system-sphinx
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "4"
        openshift.io/deployment-config.name: system-sphinx
        openshift.io/deployment.name: system-sphinx-4
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: system-sphinx-4
        deploymentConfig: system-sphinx
        deploymentconfig: system-sphinx
        node-role.kubernetes.io/worker: ""
        threescale_component: system
        threescale_component_element: sphinx
    spec:
      containers:
      - args:
        - rake
        - openshift:thinking_sphinx:start
        env:
        - name: RAILS_ENV
          valueFrom:
            configMapKeyRef:
              key: RAILS_ENV
              name: system-environment
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-database
        - name: THINKING_SPHINX_ADDRESS
          value: 0.0.0.0
        - name: THINKING_SPHINX_CONFIGURATION_FILE
          value: db/sphinx/production.conf
        - name: THINKING_SPHINX_PID_FILE
          value: db/sphinx/searchd.pid
        - name: DELTA_INDEX_INTERVAL
          value: "5"
        - name: FULL_REINDEX_INTERVAL
          value: "60"
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              key: URL
              name: system-redis
        - name: MESSAGE_BUS_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_URL
              name: system-redis
        - name: REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: NAMESPACE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_NAMESPACE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_NAMESPACE
              name: system-redis
        - name: REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: SENTINEL_HOSTS
              name: system-redis
        - name: REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: SENTINEL_ROLE
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_HOSTS
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_HOSTS
              name: system-redis
        - name: MESSAGE_BUS_REDIS_SENTINEL_ROLE
          valueFrom:
            secretKeyRef:
              key: MESSAGE_BUS_SENTINEL_ROLE
              name: system-redis
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 60
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 9306
          timeoutSeconds: 1
        name: system-sphinx
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 80m
            memory: 250Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /opt/system/db/sphinx
          name: system-sphinx-database
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - sh
        - -c
        - until $(curl --output /dev/null --silent --fail --head http://system-master:3000/status);
          do sleep $SLEEP_SECONDS; done
        env:
        - name: SLEEP_SECONDS
          value: "1"
        image: registry.redhat.io/3scale-amp2/system-rhel7@sha256:29836068f71f53f88b75345055808106cb4620bf3d488bd458709936d716377f
        imagePullPolicy: Always
        name: system-master-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir: {}
        name: system-sphinx-database
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:08:00 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:05:52 +0000 UTC
    openshift.io/deployer-pod.name: zync-1-deploy
    openshift.io/deployer-pod.started-at: 2020-07-27 13:05:52 +0000 UTC
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: zync
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync","uid":"45f7ed93-5911-4389-906a-f7d6e6fd7edb","resourceVersion":"198378503","generation":2,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"zync"},"annotations":{"prometheus.io/port":"9393","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["zync-db-svc","zync"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync","threescale_component":"zync"}},"spec":{"initContainers":[{"name":"zync-db-svc","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef","command":["bash","-c","bundle exec sh -c \"until rake boot:db; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"SLEEP_SECONDS","value":"1"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"zync","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef","ports":[{"containerPort":8080,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"150m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8080,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8080,"scheme":"HTTP"},"initialDelaySeconds":100,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:51Z","lastTransitionTime":"2020-07-27T13:05:51Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T13:05:52Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: zync
    threescale_component: zync
  name: zync-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync
    uid: 45f7ed93-5911-4389-906a-f7d6e6fd7edb
  resourceVersion: "198493038"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-1
  uid: 87ebc4b1-569a-4dae-83fa-59a9d27351c6
spec:
  replicas: 0
  selector:
    deployment: zync-1
    deploymentConfig: zync
    deploymentconfig: zync
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: zync
        openshift.io/deployment.name: zync-1
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-1
        deploymentConfig: zync
        deploymentconfig: zync
        threescale_component: zync
    spec:
      containers:
      - env:
        - name: RAILS_LOG_TO_STDOUT
          value: "true"
        - name: RAILS_ENV
          value: production
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: zync
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 10
          httpGet:
            path: /status/live
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 60
        name: zync
        ports:
        - containerPort: 8080
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 100
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 150m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - bash
        - -c
        - bundle exec sh -c "until rake boot:db; do sleep $SLEEP_SECONDS; done"
        env:
        - name: SLEEP_SECONDS
          value: "1"
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef
        imagePullPolicy: Always
        name: zync-db-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:17:57 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:15:56 +0000 UTC
    openshift.io/deployer-pod.name: zync-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: zync
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync","uid":"45f7ed93-5911-4389-906a-f7d6e6fd7edb","resourceVersion":"198491021","generation":3,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"zync"},"annotations":{"prometheus.io/port":"9393","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["zync-db-svc","zync"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync","node-role.kubernetes.io/worker":"","threescale_component":"zync"}},"spec":{"initContainers":[{"name":"zync-db-svc","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef","command":["bash","-c","bundle exec sh -c \"until rake boot:db; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"SLEEP_SECONDS","value":"1"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"zync","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef","ports":[{"containerPort":8080,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"150m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8080,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8080,"scheme":"HTTP"},"initialDelaySeconds":100,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:08:00Z","lastTransitionTime":"2020-07-27T13:08:00Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:08:01Z","lastTransitionTime":"2020-07-27T13:08:01Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"zync-1\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:15:56Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: zync
    threescale_component: zync
  name: zync-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync
    uid: 45f7ed93-5911-4389-906a-f7d6e6fd7edb
  resourceVersion: "216976743"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-2
  uid: e2759060-b670-4b7a-8528-2786c8e75484
spec:
  replicas: 0
  selector:
    deployment: zync-2
    deploymentConfig: zync
    deploymentconfig: zync
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: zync
        openshift.io/deployment.name: zync-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-2
        deploymentConfig: zync
        deploymentconfig: zync
        node-role.kubernetes.io/worker: ""
        threescale_component: zync
    spec:
      containers:
      - env:
        - name: RAILS_LOG_TO_STDOUT
          value: "true"
        - name: RAILS_ENV
          value: production
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: zync
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 10
          httpGet:
            path: /status/live
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 60
        name: zync
        ports:
        - containerPort: 8080
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 100
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 150m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - bash
        - -c
        - bundle exec sh -c "until rake boot:db; do sleep $SLEEP_SECONDS; done"
        env:
        - name: SLEEP_SECONDS
          value: "1"
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef
        imagePullPolicy: Always
        name: zync-db-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 18:08:06 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:44 +0000 UTC
    openshift.io/deployer-pod.name: zync-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: zync
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync","uid":"45f7ed93-5911-4389-906a-f7d6e6fd7edb","resourceVersion":"216974357","generation":4,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","node-role.kubernetes.io/worker":"","threescale_component":"zync"},"annotations":{"prometheus.io/port":"9393","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["zync-db-svc","zync"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync","node-role.kubernetes.io/worker":"","threescale_component":"zync"}},"spec":{"initContainers":[{"name":"zync-db-svc","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf","command":["bash","-c","bundle exec sh -c \"until rake boot:db; do sleep $SLEEP_SECONDS; done\""],"env":[{"name":"SLEEP_SECONDS","value":"1"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"zync","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf","ports":[{"containerPort":8080,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"150m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/status/live","port":8080,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":10},"readinessProbe":{"httpGet":{"path":"/status/ready","port":8080,"scheme":"HTTP"},"initialDelaySeconds":100,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf"}}}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T15:17:57Z","lastTransitionTime":"2020-07-27T15:17:55Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"zync-2\" successfully rolled out"},{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T15:33:02Z","lastTransitionTime":"2020-07-27T15:33:02Z","message":"Deployment config has minimum availability."}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:44Z"
  generation: 2
  labels:
    app: 3scale-api-management
    node-role.kubernetes.io/worker: ""
    openshift.io/deployment-config.name: zync
    threescale_component: zync
  name: zync-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync
    uid: 45f7ed93-5911-4389-906a-f7d6e6fd7edb
  resourceVersion: "260707737"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-3
  uid: 3f3b0435-ffa7-438a-8b43-8db692036d2e
spec:
  replicas: 1
  selector:
    deployment: zync-3
    deploymentConfig: zync
    deploymentconfig: zync
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: zync
        openshift.io/deployment.name: zync-3
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-3
        deploymentConfig: zync
        deploymentconfig: zync
        node-role.kubernetes.io/worker: ""
        threescale_component: zync
    spec:
      containers:
      - env:
        - name: RAILS_LOG_TO_STDOUT
          value: "true"
        - name: RAILS_ENV
          value: production
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: zync
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 10
          httpGet:
            path: /status/live
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 60
        name: zync
        ports:
        - containerPort: 8080
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /status/ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 100
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 10
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 150m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      initContainers:
      - command:
        - bash
        - -c
        - bundle exec sh -c "until rake boot:db; do sleep $SLEEP_SECONDS; done"
        env:
        - name: SLEEP_SECONDS
          value: "1"
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf
        imagePullPolicy: Always
        name: zync-db-svc
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:06:11 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:05:53 +0000 UTC
    openshift.io/deployer-pod.name: zync-database-1-deploy
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: zync-database
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync-database","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync-database","uid":"18b1f8a3-66ae-4df8-a511-fe68788d1261","resourceVersion":"198378607","generation":2,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"zync","threescale_component_element":"database"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["postgresql"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"zync-database-postgresql:latest"},"lastTriggeredImage":"registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:de3ab628b403dc5eed986a7f392c34687bddafee7bdfccfd65cecf137ade3dfd"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync-database"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync-database","threescale_component":"zync","threescale_component_element":"database"}},"spec":{"volumes":[{"name":"zync-database-data","emptyDir":{}}],"containers":[{"name":"postgresql","image":"registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:de3ab628b403dc5eed986a7f392c34687bddafee7bdfccfd65cecf137ade3dfd","ports":[{"containerPort":5432,"protocol":"TCP"}],"env":[{"name":"POSTGRESQL_USER","value":"zync"},{"name":"POSTGRESQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_DATABASE_PASSWORD"}}},{"name":"POSTGRESQL_DATABASE","value":"zync_production"}],"resources":{"limits":{"cpu":"250m","memory":"2G"},"requests":{"cpu":"50m","memory":"250M"}},"volumeMounts":[{"name":"zync-database-data","mountPath":"/var/lib/pgsql/data"}],"livenessProbe":{"tcpSocket":{"port":5432},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-i","-c","psql -h 127.0.0.1 -U zync -q -d zync_production -c 'SELECT 1'"]},"initialDelaySeconds":5,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:51Z","lastTransitionTime":"2020-07-27T13:05:51Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T13:05:53Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: zync-database
    threescale_component: zync
    threescale_component_element: database
  name: zync-database-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync-database
    uid: 18b1f8a3-66ae-4df8-a511-fe68788d1261
  resourceVersion: "198491338"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-database-1
  uid: bd1c99e1-6ca0-43c1-bfa9-a35c705ab733
spec:
  replicas: 0
  selector:
    deployment: zync-database-1
    deploymentConfig: zync-database
    deploymentconfig: zync-database
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: zync-database
        openshift.io/deployment.name: zync-database-1
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-database-1
        deploymentConfig: zync-database
        deploymentconfig: zync-database
        threescale_component: zync
        threescale_component_element: database
    spec:
      containers:
      - env:
        - name: POSTGRESQL_USER
          value: zync
        - name: POSTGRESQL_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ZYNC_DATABASE_PASSWORD
              name: zync
        - name: POSTGRESQL_DATABASE
          value: zync_production
        image: registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:de3ab628b403dc5eed986a7f392c34687bddafee7bdfccfd65cecf137ade3dfd
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 5432
          timeoutSeconds: 1
        name: postgresql
        ports:
        - containerPort: 5432
          protocol: TCP
        readinessProbe:
          exec:
            command:
            - /bin/sh
            - -i
            - -c
            - psql -h 127.0.0.1 -U zync -q -d zync_production -c 'SELECT 1'
          failureThreshold: 3
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: 250m
            memory: 2G
          requests:
            cpu: 50m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/lib/pgsql/data
          name: zync-database-data
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir: {}
        name: zync-database-data
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:21:44 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:16:10 +0000 UTC
    openshift.io/deployer-pod.name: zync-database-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: zync-database
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync-database","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync-database","uid":"18b1f8a3-66ae-4df8-a511-fe68788d1261","resourceVersion":"198491272","generation":3,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"zync","threescale_component_element":"database"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["postgresql"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"zync-database-postgresql:latest"},"lastTriggeredImage":"registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:de3ab628b403dc5eed986a7f392c34687bddafee7bdfccfd65cecf137ade3dfd"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync-database"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync-database","node-role.kubernetes.io/worker":"","threescale_component":"zync","threescale_component_element":"database"}},"spec":{"volumes":[{"name":"zync-database-data","emptyDir":{}}],"containers":[{"name":"postgresql","image":"registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:de3ab628b403dc5eed986a7f392c34687bddafee7bdfccfd65cecf137ade3dfd","ports":[{"containerPort":5432,"protocol":"TCP"}],"env":[{"name":"POSTGRESQL_USER","value":"zync"},{"name":"POSTGRESQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_DATABASE_PASSWORD"}}},{"name":"POSTGRESQL_DATABASE","value":"zync_production"}],"resources":{"limits":{"cpu":"250m","memory":"2G"},"requests":{"cpu":"50m","memory":"250M"}},"volumeMounts":[{"name":"zync-database-data","mountPath":"/var/lib/pgsql/data"}],"livenessProbe":{"tcpSocket":{"port":5432},"initialDelaySeconds":30,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-i","-c","psql -h 127.0.0.1 -U zync -q -d zync_production -c 'SELECT 1'"]},"initialDelaySeconds":5,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"amp","serviceAccount":"amp","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:10Z","lastTransitionTime":"2020-07-27T13:06:10Z","message":"Deployment config has minimum availability."},{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:06:11Z","lastTransitionTime":"2020-07-27T13:06:11Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"zync-database-1\" successfully rolled out"}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:16:10Z"
  generation: 2
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: zync-database
    threescale_component: zync
    threescale_component_element: database
  name: zync-database-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync-database
    uid: 18b1f8a3-66ae-4df8-a511-fe68788d1261
  resourceVersion: "198503010"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-database-2
  uid: eff4b82d-a691-4fa9-9695-563725131fd0
spec:
  replicas: 1
  selector:
    deployment: zync-database-2
    deploymentConfig: zync-database
    deploymentconfig: zync-database
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: zync-database
        openshift.io/deployment.name: zync-database-2
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-database-2
        deploymentConfig: zync-database
        deploymentconfig: zync-database
        node-role.kubernetes.io/worker: ""
        threescale_component: zync
        threescale_component_element: database
    spec:
      containers:
      - env:
        - name: POSTGRESQL_USER
          value: zync
        - name: POSTGRESQL_PASSWORD
          valueFrom:
            secretKeyRef:
              key: ZYNC_DATABASE_PASSWORD
              name: zync
        - name: POSTGRESQL_DATABASE
          value: zync_production
        image: registry.redhat.io/rhscl/postgresql-10-rhel7@sha256:de3ab628b403dc5eed986a7f392c34687bddafee7bdfccfd65cecf137ade3dfd
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          initialDelaySeconds: 30
          periodSeconds: 10
          successThreshold: 1
          tcpSocket:
            port: 5432
          timeoutSeconds: 1
        name: postgresql
        ports:
        - containerPort: 5432
          protocol: TCP
        readinessProbe:
          exec:
            command:
            - /bin/sh
            - -i
            - -c
            - psql -h 127.0.0.1 -U zync -q -d zync_production -c 'SELECT 1'
          failureThreshold: 3
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: 250m
            memory: 2G
          requests:
            cpu: 50m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /var/lib/pgsql/data
          name: zync-database-data
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: amp
      serviceAccountName: amp
      terminationGracePeriodSeconds: 30
      volumes:
      - emptyDir: {}
        name: zync-database-data
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 13:05:58 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 13:05:52 +0000 UTC
    openshift.io/deployer-pod.name: zync-que-1-deploy
    openshift.io/deployer-pod.started-at: 2020-07-27 13:05:52 +0000 UTC
    openshift.io/deployment-config.latest-version: "1"
    openshift.io/deployment-config.name: zync-que
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: "1"
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync-que","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync-que","uid":"466152c8-1c88-42e0-83bb-45eb3d7fefe4","resourceVersion":"198378502","generation":2,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"zync"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["que"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync-que"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync-que"},"annotations":{"prometheus.io/port":"9394","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"que","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef","command":["/usr/bin/bash"],"args":["-c","bundle exec rake 'que[--worker-count 10]'"],"ports":[{"name":"metrics","containerPort":9394,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"250m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/metrics","port":9394,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"zync-que-sa","serviceAccount":"zync-que-sa","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2020-07-27T13:05:51Z","lastTransitionTime":"2020-07-27T13:05:51Z","message":"Deployment config does not have minimum availability."}]}}
  creationTimestamp: "2020-07-27T13:05:52Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: zync-que
    threescale_component: zync
  name: zync-que-1
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync-que
    uid: 466152c8-1c88-42e0-83bb-45eb3d7fefe4
  resourceVersion: "198491769"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-que-1
  uid: 1a4fc234-8a1d-42af-bce7-9a610565e2a6
spec:
  replicas: 0
  selector:
    deployment: zync-que-1
    deploymentConfig: zync-que
    deploymentconfig: zync-que
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "1"
        openshift.io/deployment-config.name: zync-que
        openshift.io/deployment.name: zync-que-1
        prometheus.io/port: "9394"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-que-1
        deploymentConfig: zync-que
        deploymentconfig: zync-que
    spec:
      containers:
      - args:
        - -c
        - bundle exec rake 'que[--worker-count 10]'
        command:
        - /usr/bin/bash
        env:
        - name: RAILS_LOG_TO_STDOUT
          value: "true"
        - name: RAILS_ENV
          value: production
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: zync
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /metrics
            port: 9394
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 60
        name: que
        ports:
        - containerPort: 9394
          name: metrics
          protocol: TCP
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 250m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: zync-que-sa
      serviceAccountName: zync-que-sa
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    kubectl.kubernetes.io/original-replicas: "1"
    openshift.io/deployer-pod.completed-at: 2020-07-27 15:16:42 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-07-27 15:16:31 +0000 UTC
    openshift.io/deployer-pod.name: zync-que-2-deploy
    openshift.io/deployment-config.latest-version: "2"
    openshift.io/deployment-config.name: zync-que
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: config change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync-que","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync-que","uid":"466152c8-1c88-42e0-83bb-45eb3d7fefe4","resourceVersion":"198491596","generation":3,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","threescale_component":"zync"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["que"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync-que"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync-que","node-role.kubernetes.io/worker":""},"annotations":{"prometheus.io/port":"9394","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"que","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef","command":["/usr/bin/bash"],"args":["-c","bundle exec rake 'que[--worker-count 10]'"],"ports":[{"name":"metrics","containerPort":9394,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"250m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/metrics","port":9394,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"zync-que-sa","serviceAccount":"zync-que-sa","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T13:05:58Z","lastTransitionTime":"2020-07-27T13:05:54Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"zync-que-1\" successfully rolled out"},{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T13:06:33Z","lastTransitionTime":"2020-07-27T13:06:33Z","message":"Deployment config has minimum availability."}],"readyReplicas":1}}
  creationTimestamp: "2020-07-27T15:16:31Z"
  generation: 3
  labels:
    app: 3scale-api-management
    openshift.io/deployment-config.name: zync-que
    threescale_component: zync
  name: zync-que-2
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync-que
    uid: 466152c8-1c88-42e0-83bb-45eb3d7fefe4
  resourceVersion: "216974957"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-que-2
  uid: ee9b79df-eeed-425c-ab0e-dd6866e55966
spec:
  replicas: 0
  selector:
    deployment: zync-que-2
    deploymentConfig: zync-que
    deploymentconfig: zync-que
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "2"
        openshift.io/deployment-config.name: zync-que
        openshift.io/deployment.name: zync-que-2
        prometheus.io/port: "9394"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-que-2
        deploymentConfig: zync-que
        deploymentconfig: zync-que
        node-role.kubernetes.io/worker: ""
    spec:
      containers:
      - args:
        - -c
        - bundle exec rake 'que[--worker-count 10]'
        command:
        - /usr/bin/bash
        env:
        - name: RAILS_LOG_TO_STDOUT
          value: "true"
        - name: RAILS_ENV
          value: production
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: zync
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:34fa60de75f5a0e220105c6bf0ed676f16c8b206812fad65078cf98a16a6d4ef
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /metrics
            port: 9394
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 60
        name: que
        ports:
        - containerPort: 9394
          name: metrics
          protocol: TCP
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 250m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: zync-que-sa
      serviceAccountName: zync-que-sa
      terminationGracePeriodSeconds: 30
status:
  observedGeneration: 3
  replicas: 0
apiVersion: v1
kind: ReplicationController
metadata:
  annotations:
    openshift.io/deployer-pod.completed-at: 2020-08-11 18:06:13 +0000 UTC
    openshift.io/deployer-pod.created-at: 2020-08-11 18:05:44 +0000 UTC
    openshift.io/deployer-pod.name: zync-que-3-deploy
    openshift.io/deployment-config.latest-version: "3"
    openshift.io/deployment-config.name: zync-que
    openshift.io/deployment.phase: Complete
    openshift.io/deployment.replicas: ""
    openshift.io/deployment.status-reason: image change
    openshift.io/encoded-deployment-config: |
      {"kind":"DeploymentConfig","apiVersion":"apps.openshift.io/v1","metadata":{"name":"zync-que","namespace":"3scale-project","selfLink":"/apis/apps.openshift.io/v1/namespaces/3scale-project/deploymentconfigs/zync-que","uid":"466152c8-1c88-42e0-83bb-45eb3d7fefe4","resourceVersion":"216974358","generation":4,"creationTimestamp":"2020-07-27T13:05:51Z","labels":{"app":"3scale-api-management","node-role.kubernetes.io/worker":"","threescale_component":"zync"},"ownerReferences":[{"apiVersion":"apps.3scale.net/v1alpha1","kind":"APIManager","name":"claro-apimanager-pelado","uid":"3d48e8a8-df41-4aa1-9516-43d087853cca","controller":true,"blockOwnerDeletion":true}]},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ConfigChange"},{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["que"],"from":{"kind":"ImageStreamTag","namespace":"3scale-project","name":"amp-zync:latest"},"lastTriggeredImage":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf"}}],"replicas":1,"revisionHistoryLimit":10,"test":false,"selector":{"deploymentConfig":"zync-que"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"3scale-api-management","deploymentConfig":"zync-que","node-role.kubernetes.io/worker":""},"annotations":{"prometheus.io/port":"9394","prometheus.io/scrape":"true"}},"spec":{"containers":[{"name":"que","image":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf","command":["/usr/bin/bash"],"args":["-c","bundle exec rake 'que[--worker-count 10]'"],"ports":[{"name":"metrics","containerPort":9394,"protocol":"TCP"}],"env":[{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAILS_ENV","value":"production"},{"name":"DATABASE_URL","valueFrom":{"secretKeyRef":{"name":"zync","key":"DATABASE_URL"}}},{"name":"SECRET_KEY_BASE","valueFrom":{"secretKeyRef":{"name":"zync","key":"SECRET_KEY_BASE"}}},{"name":"ZYNC_AUTHENTICATION_TOKEN","valueFrom":{"secretKeyRef":{"name":"zync","key":"ZYNC_AUTHENTICATION_TOKEN"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{"limits":{"cpu":"1","memory":"512Mi"},"requests":{"cpu":"250m","memory":"250M"}},"livenessProbe":{"httpGet":{"path":"/metrics","port":9394,"scheme":"HTTP"},"initialDelaySeconds":10,"timeoutSeconds":60,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"zync-que-sa","serviceAccount":"zync-que-sa","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":3,"observedGeneration":3,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf"}}}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2020-07-27T15:16:43Z","lastTransitionTime":"2020-07-27T15:16:40Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"zync-que-2\" successfully rolled out"},{"type":"Available","status":"True","lastUpdateTime":"2020-07-27T15:31:23Z","lastTransitionTime":"2020-07-27T15:31:23Z","message":"Deployment config has minimum availability."}],"readyReplicas":1}}
  creationTimestamp: "2020-08-11T18:05:44Z"
  generation: 2
  labels:
    app: 3scale-api-management
    node-role.kubernetes.io/worker: ""
    openshift.io/deployment-config.name: zync-que
    threescale_component: zync
  name: zync-que-3
  namespace: 3scale-project
  ownerReferences:
  - apiVersion: apps.openshift.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: DeploymentConfig
    name: zync-que
    uid: 466152c8-1c88-42e0-83bb-45eb3d7fefe4
  resourceVersion: "260712779"
  selfLink: /api/v1/namespaces/3scale-project/replicationcontrollers/zync-que-3
  uid: 3ea55efe-68d9-4247-a1ac-f174083436f8
spec:
  replicas: 1
  selector:
    deployment: zync-que-3
    deploymentConfig: zync-que
    deploymentconfig: zync-que
  template:
    metadata:
      annotations:
        openshift.io/deployment-config.latest-version: "3"
        openshift.io/deployment-config.name: zync-que
        openshift.io/deployment.name: zync-que-3
        prometheus.io/port: "9394"
        prometheus.io/scrape: "true"
      creationTimestamp: null
      labels:
        app: 3scale-api-management
        deployment: zync-que-3
        deploymentConfig: zync-que
        deploymentconfig: zync-que
        node-role.kubernetes.io/worker: ""
    spec:
      containers:
      - args:
        - -c
        - bundle exec rake 'que[--worker-count 10]'
        command:
        - /usr/bin/bash
        env:
        - name: RAILS_LOG_TO_STDOUT
          value: "true"
        - name: RAILS_ENV
          value: production
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              key: DATABASE_URL
              name: zync
        - name: SECRET_KEY_BASE
          valueFrom:
            secretKeyRef:
              key: SECRET_KEY_BASE
              name: zync
        - name: ZYNC_AUTHENTICATION_TOKEN
          valueFrom:
            secretKeyRef:
              key: ZYNC_AUTHENTICATION_TOKEN
              name: zync
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: registry.redhat.io/3scale-amp2/zync-rhel7@sha256:f46b47b84450a81cb463b66dc86b91baf0dd60bdca275192925f6924b90a57bf
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /metrics
            port: 9394
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 60
        name: que
        ports:
        - containerPort: 9394
          name: metrics
          protocol: TCP
        resources:
          limits:
            cpu: "1"
            memory: 512Mi
          requests:
            cpu: 250m
            memory: 250M
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: zync-que-sa
      serviceAccountName: zync-que-sa
      terminationGracePeriodSeconds: 30
status:
  availableReplicas: 1
  fullyLabeledReplicas: 1
  observedGeneration: 2
  readyReplicas: 1
  replicas: 1
